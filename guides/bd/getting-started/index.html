<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.8.1"/><meta name="description" content="This guide is supposed to act as an introduction to plugin development for the Discord client modification BetterDiscord. It mostly focuses…" data-gatsby-head="true"/><meta property="og:title" content="Getting started with BetterDiscord plugin development - Zerthox" data-gatsby-head="true"/><meta property="og:description" content="This guide is supposed to act as an introduction to plugin development for the Discord client modification BetterDiscord. It mostly focuses…" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta name="twitter:card" content="summary" data-gatsby-head="true"/><meta name="twitter:creator" content="Zerthox" data-gatsby-head="true"/><meta name="twitter:title" content="Getting started with BetterDiscord plugin development - Zerthox" data-gatsby-head="true"/><meta name="twitter:description" content="This guide is supposed to act as an introduction to plugin development for the Discord client modification BetterDiscord. It mostly focuses…" data-gatsby-head="true"/><style data-href="/styles.2b7dae0f3b363d795639.css" data-identity="gatsby-global-css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}body{background:#0f1010;color:hsla(0,0%,100%,.7);font-family:sans-serif;line-height:1.5}.center-module--container--d71dc{align-items:center;display:flex;flex-direction:column;margin-bottom:20px;margin-top:10%}.avatar-module--avatar--9b73c{background-size:100%;border-radius:50%}.user-module--container--b30bb{align-items:center;color:hsla(0,0%,100%,.7);display:flex;flex-direction:row;padding:0 5px;text-decoration:none}.user-module--container--b30bb:hover .user-module--name--d5384{color:#fff}.user-module--container--b30bb:hover .user-module--avatar--3d0a3{opacity:1}.user-module--name--d5384{margin-left:5px}.user-module--avatar--3d0a3{opacity:.7}.header-module--header--a0daf{background-color:#242628;padding:5px 10%;-webkit-user-select:none;user-select:none;z-index:1}.header-module--header--a0daf,.header-module--title--78ab6{align-items:center;display:flex;flex-direction:row;justify-content:center}.header-module--title--78ab6{color:#fff;font-size:30px;font-weight:600;padding:0 30px;text-decoration:none}.header-module--name--70fa5{margin-left:10px}.header-module--bar--d4a44{align-items:center;display:flex;flex-direction:row;flex-grow:1;max-width:800px}.header-module--item--e3e25{border-radius:3px;color:#fff;margin:0 10px;padding:3px 10px;text-decoration:none;transition:all .15s ease-in-out}.header-module--item--e3e25.header-module--active--583af,.header-module--item--e3e25:hover{background-color:rgba(0,0,0,.3)}.footer-module--footer--d155e{background-color:#242628;display:flex;font-size:13px;padding:5px 20px;-webkit-user-select:none;user-select:none}.footer-module--left--d6390{margin-right:auto}.footer-module--right--83036{margin-left:auto}.footer-module--link--06b40{color:hsla(0,0%,100%,.7);text-decoration:none;transition:all .15s ease-in-out}.footer-module--link--06b40:hover{color:#fff}.layout-module--main--3f0fd{display:grid;grid-template-columns:auto;grid-template-rows:auto 1fr auto;height:100vh;justify-content:stretch;min-width:700px}.layout-module--body--a3b83{align-items:center;background-color:#0f1010;display:flex;flex-direction:column;padding:20px 10%}.layout-module--title--c05ab{align-items:center;display:flex;flex-direction:column;margin-bottom:20px}.layout-module--heading--dd2ea{color:#fff;font-size:40px;text-align:center;text-shadow:0 0 20px hsla(0,0%,100%,.1)}.layout-module--info--8110f{align-items:center;display:flex;flex-direction:row}.layout-module--author--34e41{color:hsla(0,0%,100%,.7);display:flex;flex-direction:row;font-size:20px}.layout-module--date--211e7{color:hsla(0,0%,100%,.3);font-size:14px;margin-left:10px}.layout-module--updated--8118a{font-style:italic}.layout-module--separator--3ea5b{font-size:1.2em;margin:0 1ch}.layout-module--content--ba793{background-color:#242628;border-radius:3px;margin:0 10px;max-width:1000px;padding:30px 60px 40px}.title-module--title--87401{color:#fff;font-size:75px;text-shadow:0 0 20px hsla(0,0%,100%,.3)}.title-module--subtitle--ec44c{color:hsla(0,0%,100%,.7);font-size:30px}._404-module--link--35fd2{color:hsla(0,0%,100%,.7);cursor:pointer;font-size:18px;margin-top:15px;text-decoration:none;transition:all .15s ease-in-out}._404-module--link--35fd2:not(._404-module--disabled--f20a3):hover{color:#fff}._404-module--link--35fd2._404-module--disabled--f20a3{cursor:default;opacity:.3}.anchor-module--anchor--32227{color:hsla(0,0%,100%,.7);cursor:pointer;text-decoration:none;transition:all .15s ease-in-out}.anchor-module--anchor--32227:hover{color:#fff}.anchor-module--anchor--32227.anchor-module--text--f2bb6{background-color:hsla(0,0%,100%,.07);border-bottom:1px solid hsla(0,0%,100%,.2);padding:1px 2px}.anchor-module--anchor--32227.anchor-module--text--f2bb6:hover{background-color:hsla(0,0%,100%,.2);border-color:#fff}.paragraph-module--paragraph--e296c{margin:5px 0;text-align:justify}.paragraph-module--paragraph--e296c img{max-width:100%}.heading-module--heading--1cb7a{margin:1.5em 0 .5em -2px;padding-left:2px;position:relative}.heading-module--heading--1cb7a:hover .heading-module--link--3f9ce{opacity:.5}.heading-module--heading--1cb7a:hover .heading-module--link--3f9ce:hover{opacity:1}.heading-module--link--3f9ce{color:#fff;cursor:pointer;opacity:0;padding:0 3px;position:absolute;right:100%;text-decoration:none;transition:all .15s ease-in-out;-webkit-user-select:none;user-select:none}.code-module--codeblock--bfd94,.code-module--inline--5f9ed{font-family:source-code-pro,Menlo,Monaco,Consolas,Liberation Mono,Courier New,Courier,monospace}.code-module--codeblock--bfd94{background:#0f1010;border-radius:5px;display:block;font-size:14px;margin:10px 0;overflow-x:auto;padding:5px 10px 5px 4ch;position:relative;tab-size:4}.code-module--no-margin--74dce .code-module--codeblock--bfd94{margin:0}.code-module--content--3d4e5{white-space:pre}.code-module--number--8b145{color:#3a454d;margin-left:-4ch;position:absolute;text-align:right;-webkit-user-select:none;user-select:none;width:3ch}.code-module--line--2bfd9{margin-left:4ch}.code-module--inline--5f9ed{background:#1a1b1e;border-radius:3px;font-size:14px;padding:1px 3px}.list-module--list--48ac1{display:flex;flex-direction:column}.list-module--item--2ff2e{border-radius:3px;display:flex;padding:20px 60px;position:relative}.list-module--item--2ff2e:hover{background:#303236}.list-module--link--a777c{color:hsla(0,0%,100%,.7);cursor:pointer;display:flex;flex-direction:column;flex-grow:1;text-decoration:none;transition:all .15s ease-in-out}.list-module--title--83b07{align-items:center;display:flex;flex-direction:row}.list-module--name--27e7d{font-size:18px;font-weight:600}.list-module--date--f1eea{color:hsla(0,0%,100%,.3);margin-left:10px}.list-module--description--64b4a{font-size:14px;max-width:600px}.list-module--author--82ff7{align-items:center;cursor:default;display:flex;flex-direction:row;flex-grow:1;margin-left:1ch}.banner-module--banner--1230e{align-items:center;display:flex;flex-direction:row;margin:20px -20px;padding:10px}.banner-module--banner--1230e.banner-module--info--960e2{background-color:#364563}.banner-module--banner--1230e.banner-module--info--960e2 .banner-module--icon--c0038{background-color:#5973a6}.banner-module--banner--1230e.banner-module--warn--53f69{background-color:#c76605}.banner-module--banner--1230e.banner-module--warn--53f69 .banner-module--icon--c0038{background-color:#fa9938}.banner-module--icon--c0038{font-weight:700;margin:5px;padding:5px 10px}.banner-module--content--d3679{margin:0 10px}.banner-module--content--d3679.banner-module--bold--a3e29{font-weight:600}.codetabs-module--container--65389{display:flex;flex-direction:column}.codetabs-module--tabs--3225b{display:flex;flex-direction:row;margin-left:5px}.codetabs-module--item--ab659{border-radius:3px 3px 0 0;color:hsla(0,0%,100%,.7);cursor:pointer;margin:0 5px;padding:5px 15px;transition:all .15s ease-in-out}.codetabs-module--item--ab659:hover{background:rgba(15,16,16,.5);color:#fff}.codetabs-module--item--ab659.codetabs-module--active--196a5{background:#0f1010}.codetabs-module--content--d3d01>*{margin:0}</style><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><link rel="icon" href="/favicon-32x32.png?v=9298de8c14fc98a854bd9ec5a9e9d15c" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><title data-gatsby-head="true">Getting started with BetterDiscord plugin development - Zerthox</title></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout-module--main--3f0fd"><div class="header-module--header--a0daf"><a class="header-module--title--78ab6" href="/"><div class="avatar-module--avatar--9b73c" style="background-image:url(https://avatars.githubusercontent.com/zerthox);width:40px;height:40px"></div><span class="header-module--name--70fa5">Zerthox</span></a><div class="header-module--bar--d4a44"><a class="header-module--item--e3e25" href="/">Home</a><a class="header-module--item--e3e25 header-module--active--583af" href="/guides/">Guides</a></div></div><div class="layout-module--body--a3b83"><div class="layout-module--title--c05ab"><div class="layout-module--heading--dd2ea">Getting started with BetterDiscord plugin development</div><div class="layout-module--info--8110f"><div class="layout-module--author--34e41">by <a href="https://github.com/zerthox" class="user-module--container--b30bb" target="_blank" rel="noopener noreferrer"><div class="user-module--avatar--3d0a3 avatar-module--avatar--9b73c" style="background-image:url(https://avatars.githubusercontent.com/zerthox);width:30px;height:30px"></div><div class="user-module--name--d5384">Zerthox</div></a></div><div class="layout-module--date--211e7">14 January 2022<span class="layout-module--updated--8118a"> (Updated: <!-- -->23 March 2022<!-- -->)</span><span class="layout-module--separator--3ea5b">|</span><span>15<!-- -->min read</span></div></div></div><div class="layout-module--content--ba793"><div class="paragraph-module--paragraph--e296c">This guide is supposed to act as an introduction to plugin development for the <a href="https://discord.com" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Discord</a> client modification <a href="https://betterdiscord.app" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">BetterDiscord</a>.
It mostly focuses on covering topics that are not covered by other resources, like monkey patching or webpack internals.</div>
<div class="banner-module--banner--1230e banner-module--warn--53f69"><div class="banner-module--icon--c0038">!</div><div class="banner-module--content--d3679"><div class="paragraph-module--paragraph--e296c">This article assumes you are familiar with modern <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">JavaScript</a>
like <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Arrow functions</a>,
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Destructuring</a>
and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Optional Chaining</a>
as well as the <a href="https://react.dev" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">React</a> UI library!
You can read up on these in <a href="https://javascript.info" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">The Modern JavaScript Tutorial</a> and <a href="https://react.dev/learn" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Learn React</a>.</div></div></div>
<h2 class="heading-module--heading--1cb7a" id="environment"><a class="heading-module--link--3f9ce" href="/guides/bd/getting-started/#environment">#</a>Environment</h2>
<div class="paragraph-module--paragraph--e296c">The Discord desktop application uses <a href="https://www.electronjs.org" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Electron</a>.
Note that plugins run in <a href="https://www.electronjs.org/docs/latest/tutorial/process-model#the-renderer-process" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Electron&#x27;s renderer process</a>.
This means our environment is a <strong>browser not <a href="https://nodejs.org" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Node.js</a>!</strong>.
As of September 2022, BetterDiscord polyfills a small subset of absolutely necessary functions in modules shipped with Node.
However, this is far from exhaustive.</div>
<div class="paragraph-module--paragraph--e296c">The UI is created using <a href="https://react.dev" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">React</a> and all of the data is handled by a custom event system and a custom <a href="https://facebook.github.io/flux/" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Flux</a> implementation.
Discord&#x27;s source code is written in <a href="https://www.typescriptlang.org" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">TypeScript</a>, however that is mostly irrelevant for plugin development.
Everything is transpiled with <a href="https://swc.rs" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">SWC</a> and then bundled together using <a href="https://webpack.js.org" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">webpack</a>.</div>
<div class="paragraph-module--paragraph--e296c">Thanks to being based on <a href="https://www.chromium.org/Home" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Chromium</a>, Electron&#x27;s renderer window has the <a href="https://developer.chrome.com/docs/devtools/" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Chrome DevTools</a>.
Since the Discord update on 25 January 2022 they are disabled by default.
You can reenable them in BetterDiscord&#x27;s developer settings.</div>
<span><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 688px; 
                                margin-top: 10px;
                                margin-bottom: 10px;
                                margin-left: unset;
                                margin-right: unset;
                            "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/4f1328e274d88a5a8c049d1e90d36d21/ebf47/bd-devtools-setting.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 27.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAxUlEQVR42oWQSwvCMBCE84dUqn2Ztmn6TFto2mIf4MWb4MWD/x9GkpLiQfTwsTAsszNLiqpF200QdQeWlKBRCtuL4PjsL+451pzcEG0/o6gkiGg6yGHWhjTMELAcYVwgNNPAckS81KxavpkenQDL9YamvYCoNAo/4NpMJaRRtqG0Vc+2aTAJPcqxOzjYWx5IWUvIYdIJPmsYftXXO5TDss6QrzuW5wOEpxXUH5O8AUsEGBf6l3EqdIpvRwxbZTtAM86o+xFvDKutoWlGXhUAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="BetterDiscord dev tools settings"
        title=""
        src="/static/4f1328e274d88a5a8c049d1e90d36d21/ebf47/bd-devtools-setting.png"
        srcset="/static/4f1328e274d88a5a8c049d1e90d36d21/4edbd/bd-devtools-setting.png 175w,
/static/4f1328e274d88a5a8c049d1e90d36d21/13ae7/bd-devtools-setting.png 350w,
/static/4f1328e274d88a5a8c049d1e90d36d21/ebf47/bd-devtools-setting.png 688w"
        sizes="(max-width: 688px) 100vw, 688px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></span>
<div class="paragraph-module--paragraph--e296c">Afterwards you can access the dev tools by pressing <span class="code-module--inline--5f9ed">Ctrl</span> + <span class="code-module--inline--5f9ed">Shift</span> + <span class="code-module--inline--5f9ed">I</span> (or <span class="code-module--inline--5f9ed">Cmd</span> + <span class="code-module--inline--5f9ed">Opt</span> + <span class="code-module--inline--5f9ed">I</span> on a Mac).
The dev tools will be <strong>extremely important</strong> for any kind of reverse engineering later on and can be used to experiment in the console.</div>
<h2 class="heading-module--heading--1cb7a" id="react-dev-tools"><a class="heading-module--link--3f9ce" href="/guides/bd/getting-started/#react-dev-tools">#</a>React Dev Tools</h2>
<div class="paragraph-module--paragraph--e296c">React Developer Tools extends the regular dev tools with React specific tabs.
If you have debugged a React application before, you should be familiar with them.
They will be very helpful when working with Discord&#x27;s own React components.</div>
<div class="paragraph-module--paragraph--e296c">In order to use them in Discord, you will need to have a <a href="https://www.google.com/intl/en_us/chrome/" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Chrome</a> installation on your computer.
Install the <a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi/" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">React Developer Tools extension</a> from the Chrome Web Store.
<em>(As an alternative manually mimicking the folder structure and placing the extension files in there will also suffice.)</em>
Then enable the setting in BetterDiscord&#x27;s developer settings and the dev tools will automatically be loaded in Discord as well.</div>
<span><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; 
                                margin-top: 10px;
                                margin-bottom: 10px;
                                margin-left: unset;
                                margin-right: unset;
                            "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/e3b8b7ebc174f0252c4bbd47349adcd7/1e043/react-dev-tools.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 64.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACjUlEQVR42m2SbW/TVhiG/Sv40tGkw0nsY/v45cR2HCdxmtCmiZfQrFkLSjvGJm0Vm0TH2vAigWCbhoCP+wX7pddkpy2o4sNt+xz5XPf9POfR/CDC9Zv4KsYLokuFeH6I9JqoZgtheWxVLLa+1tm4XcE0bGwZYAqXNIyI4wgVJrh+iCZViu0nOG6MXchrIYME0wlpWKqUYTdpWEH53Uz6pColbm+X65oIEDJGxVl5VnO7I4LJIV42xg7S8vCXJGTEVk1y+viM+WJJXShMJ0LIECHXpo6foNmqg9sbYyVDnKiPIdZJGmUqda0icVV3OH38hG9m9/H9IXFrTDNuE0QudbE21oTbws0mOL09ZGcXO8oo9oxL6FXCAli5Y/PHxUsWRyd4RRCVIGRh/Ok/rXjI7gjZ3UP4bQwvQbjxGmjdBFqsnr/i/vIRrc6QTjbCVel1n0tgsZDJEKt9F7+7ixv2qBdl2+G67EuZMqKi26xevGY8PaCq21iF8Y3WaEbdxlEpanefnXtHxJ0hZkNi3JAwPaqVGqvVS/LZdyXwCvb55Wl6b0pt+C2DR2c8fPYng+9/ozHYR8+m1Poz9Gytev8eG60R5399JC8TOmUbrkBXYG3zeEX1+ILgyTvssw80fnlD9XjF5vKcyvK8fG8uL9g6WXHr6Cm///sfeT6nWnO+MKsKrdbsU1cZYjhHTo+xJw9wdg4wuhOMbo7ZnyLSEY1wm9t2wsWrv8lnizJhASmGuZjR64R6OkZPRoidBfLwlHT5K635D9iFwc6CRlF6J6fembChBpy/fU8+/QQshrmAXgNr7T301i5GNsOZ/0hw+DPq4CcGBw/p7Z9gdvPSsJ6O+SrY5unrf5h81sObJf8PzeSwVzv6BQcAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="React dev tools"
        title=""
        src="/static/e3b8b7ebc174f0252c4bbd47349adcd7/1e043/react-dev-tools.png"
        srcset="/static/e3b8b7ebc174f0252c4bbd47349adcd7/4edbd/react-dev-tools.png 175w,
/static/e3b8b7ebc174f0252c4bbd47349adcd7/13ae7/react-dev-tools.png 350w,
/static/e3b8b7ebc174f0252c4bbd47349adcd7/1e043/react-dev-tools.png 690w"
        sizes="(max-width: 690px) 100vw, 690px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></span>
<div class="banner-module--banner--1230e banner-module--info--960e2"><div class="banner-module--icon--c0038">i</div><div class="banner-module--content--d3679"><div class="paragraph-module--paragraph--e296c">Since version 4.27.0 React Developer Tools is <a href="https://github.com/facebook/react/issues/25843#issuecomment-1406766561" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">broken in Electron</a>.
You can create an <span class="code-module--inline--5f9ed">extensions</span> folder next to your BetterDiscord <span class="code-module--inline--5f9ed">plugins</span>/<span class="code-module--inline--5f9ed">themes</span> folders.
Then place the Manifest v2 build from the link above or an old version in a subfolder with the React Developer Tools extension id <span class="code-module--inline--5f9ed">fmkadmapgofadopljbjfkapdkoienihi</span> as name.</div></div></div>
<h2 class="heading-module--heading--1cb7a" id="better-discord-api"><a class="heading-module--link--3f9ce" href="/guides/bd/getting-started/#better-discord-api">#</a>BetterDiscord API</h2>
<div class="paragraph-module--paragraph--e296c">BetterDiscords full API will <strong>not</strong> be covered here in details.
You can find additional information in the <a href="https://docs.betterdiscord.app/" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">BetterDiscord documentation</a> (some parts work in progress).
If you encounter any outdated or unclear parts, you should ask in the <a href="https://discord.gg/0Tmfo5ZbORCRqbAd" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">BetterDiscord server</a>.</div>
<div class="paragraph-module--paragraph--e296c">A basic BetterDiscord plugin could look something like this:</div>
<div class="codetabs-module--container--65389"><div class="codetabs-module--tabs--3225b"><div class="codetabs-module--item--ab659 codetabs-module--active--196a5">Class</div><div class="codetabs-module--item--ab659">Callback</div></div><div class="codetabs-module--content--d3d01 code-module--no-margin--74dce"><div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token comment" style="color:#3a454d">/**</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">2</span><span class="token comment" style="color:#3a454d"> * @name MyPlugin</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">3</span><span class="token comment" style="color:#3a454d"> * @author YourName</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">4</span><span class="token comment" style="color:#3a454d"> * @version 0.1.0</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">5</span><span class="token comment" style="color:#3a454d"> * @description What the plugin does.</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">6</span><span class="token comment" style="color:#3a454d"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">7</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">8</span><span class="token plain global" style="color:#fac863">module</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c595c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">MyPlugin</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">9</span><span class="token plain">    </span><span class="token function" style="color:#79b6f2">constructor</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">meta</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">10</span><span class="token plain">        </span><span class="token comment" style="color:#3a454d">// do something when the plugin is loaded</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">11</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">12</span><span class="token plain">    </span><span class="token function" style="color:#79b6f2">start</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">13</span><span class="token plain">        </span><span class="token comment" style="color:#3a454d">// do something on plugin start</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">14</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">15</span><span class="token plain">    </span><span class="token function" style="color:#79b6f2">stop</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">16</span><span class="token plain">        </span><span class="token comment" style="color:#3a454d">// do something on plugin stop</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">17</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">18</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div></div></div>
<div class="paragraph-module--paragraph--e296c">BetterDiscord also provides the <a href="https://docs.betterdiscord.app/api/bdapi" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">BdApi</span></a> global, which has a few very helpful things for plugins.
It handles storing &amp; loading plugin data as well as injecting &amp; removing styles (CSS).</div>
<div class="paragraph-module--paragraph--e296c">The <a href="https://www.npmjs.com/package/react" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">react</a> and <a href="https://www.npmjs.com/package/react-dom" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">react-dom</a> packages are available as
<a href="https://docs.betterdiscord.app/api/bdapi#react" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">BdApi.React</span></a> and <a href="https://docs.betterdiscord.app/api/bdapi#reactdom" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">BdApi.ReactDOM</span></a>.
They are the same instances as the ones used by Discord. Always use these and <strong>do not</strong> bundle your own versions.</div>
<div class="banner-module--banner--1230e banner-module--info--960e2"><div class="banner-module--icon--c0038">i</div><div class="banner-module--content--d3679">When using <a href="https://react.dev/learn/writing-markup-with-jsx" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">JSX</a> in a plugin, it has to be transpiled.</div></div>
<div class="codetabs-module--container--65389"><div class="codetabs-module--tabs--3225b"><div class="codetabs-module--item--ab659 codetabs-module--active--196a5">JSX</div><div class="codetabs-module--item--ab659">JS</div></div><div class="codetabs-module--content--d3d01 code-module--no-margin--74dce"><div class="code-module--codeblock--bfd94"><div class="prism-code language-jsx code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token maybe-class-name">BdApi</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">3</span><span class="token plain"></span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#79b6f2">MyComponent</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">4</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#89ddff">&lt;</span><span class="token tag" style="color:#f07178">div</span><span class="token tag" style="color:#f07178"> </span><span class="token tag attr-name" style="color:#c595c5">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#89ddff">=</span><span class="token tag attr-value punctuation" style="color:#89ddff">&quot;</span><span class="token tag attr-value" style="color:#c3e88d">foo</span><span class="token tag attr-value punctuation" style="color:#89ddff">&quot;</span><span class="token tag punctuation" style="color:#89ddff">&gt;</span><span class="token plain-text"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">5</span><span class="token plain-text">        Hello world!</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">6</span><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#89ddff">&lt;/</span><span class="token tag" style="color:#f07178">div</span><span class="token tag punctuation" style="color:#89ddff">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">7</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div></div></div>
<div class="paragraph-module--paragraph--e296c"><span class="code-module--inline--5f9ed">ReactDOM</span> will not see much use in actual plugins, since most of the time you are rendering into already existing React element trees.</div>
<div class="paragraph-module--paragraph--e296c">In <span class="code-module--inline--5f9ed">BdApi</span> we also find the <a href="https://docs.betterdiscord.app/api/patcher" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">BdApi.Patcher</span></a>, which is used to modify existing functions at runtime.
More details on patching will follow later on.</div>
<div class="paragraph-module--paragraph--e296c">Lastly, <a href="https://docs.betterdiscord.app/api/webpack" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">BdApi.Webpack</span></a> features a few utilities used to search through the webpack export cache.
We will take a closer look at this next.</div>
<h2 class="heading-module--heading--1cb7a" id="webpack-modules"><a class="heading-module--link--3f9ce" href="/guides/bd/getting-started/#webpack-modules">#</a>Webpack modules</h2>
<div class="paragraph-module--paragraph--e296c"><a href="https://webpack.js.org" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Webpack</a> is a <strong>bundler</strong>, meaning at its core it is a tool to take a collection of JS modules and merge them together into one or multiple big files for production.
A module may import other modules and then expose some exports of its own.
In order to avoid executing the modules multiple times, webpack keeps exports of already executed modules in a cache.</div>
<div class="paragraph-module--paragraph--e296c"><a href="https://docs.betterdiscord.app/api/webpack" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">BdApi.Webpack</span></a> allows us to search through this export cache
in order to find variables, functions, objects or React components internally used by Discord.
<a href="https://docs.betterdiscord.app/api/webpack#getmodule" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">Webpack.getModule(filter, options)</span></a> takes a filter function and searches through the exports of all currently cached modules.</div>
<div class="paragraph-module--paragraph--e296c"><a href="https://docs.betterdiscord.app/api/filters" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">Webpack.Filters</span></a> contains helpers to create commonly used search filter patterns.
<a href="https://docs.betterdiscord.app/api/filters#byprops" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">Filters.byProps(...props)</span></a> possibly should have been named something like <span class="code-module--inline--5f9ed">byKeys</span> instead,
since people tend to confuse it with React&#x27;s Component props.
It has nothing to do with React&#x27;s props, it searches for specific properties (keys) in <span class="code-module--inline--5f9ed">module.exports</span>.
<a href="https://docs.betterdiscord.app/api/filters#bydisplayname" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">Filters.byDisplayName(name)</span></a> searches for a specific <span class="code-module--inline--5f9ed">displayName</span> set on the object.
<a href="https://docs.betterdiscord.app/api/filters#bystrings" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">Filters.byStrings(...strings)</span></a> is best explained as something similar to <span class="code-module--inline--5f9ed">target.toString().includes(...)</span>.</div>
<div class="paragraph-module--paragraph--e296c">When trying to hook into Discord&#x27;s internals, searching for the relevant webpack modules is the first step.
This may involve reading Discord&#x27;s source code, inspecting components through React dev tools, experimenting in the console etc.</div>
<div class="paragraph-module--paragraph--e296c">The Discord update on 27 September 2022 brought some major changes to characteristics of their production code.
Named top-level exports have had their names &quot;mangled&quot; (minified).
The module merging also became more aggressive, merging e.g. all of the channel list components into a single module.
These changes pose <strong>additional challenges when searching modules</strong>.</div>
<h2 class="heading-module--heading--1cb7a" id="finding-a-component"><a class="heading-module--link--3f9ce" href="/guides/bd/getting-started/#finding-a-component">#</a>Finding a component</h2>
<div class="banner-module--banner--1230e banner-module--warn--53f69"><div class="banner-module--icon--c0038">!</div><div class="banner-module--content--d3679">Details in the following examples may be outdated. Discord&#x27;s internals are undocumented and can change at any time.</div></div>
<div class="paragraph-module--paragraph--e296c">As a first example, we will attempt to find Discord&#x27;s button component in their webpack modules.
When inspecting in React devtools, the first component we stumble upon is called <span class="code-module--inline--5f9ed">U</span>.
Looking at its received props, we realize this cannot be the component we are looking for:
it is receiving the element as children, meaning those were rendered by one of its parents!</div>
<span><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 151px; 
                                margin-top: 10px;
                                margin-bottom: 10px;
                                margin-left: unset;
                                margin-right: unset;
                            "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/9f287bbecf601e29c6c1b1952ecb6846/29fe9/button-component-u.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 68.21192052980133%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABrElEQVR42qVU2U7CUBDtl6ggi6V0t5SliCAYBEqxWsCAa9TEjbg9+AUaH/wZf/CYGXON0Qe1Ppzc6e3tmTln5lZKKzbmFRsZxUZqyUBaNrGUX0ZWsXn9K6SK6uDRLMEwimis+1iptz9IYxHu6C5ebQ8tq4yj82v0B0Mkszpk1YlHSFKTJDlnwSpUmYhikhwHUk4rIKc5oFX4RqRxIVE1BOEbEcucJB6korcGt9JAqdqEblf+JZcl39w94HJ2j6fnF4TRFCnZZAs+yxCGcywgnr82hWZvMasz5pI5nsVkRkMirSKR1jimzBnZ5JggzlMs7BKWScK3XhBhsneMjr+NMJpgPDlEPxyjG0RcieXWEERTtP0I4fgAnWCEzmAEw6mistpGodxgcomyK7qLjd4WovEeesEQ26Nd+JsjJo529jmh7dYwGO4yWt0QG/0h/K0J73v1Nlyv+U4orhmRmk4Vqlniioxljwd8IaUibxSZlGz4UTJtaGYJ51e3uJjdYbp/wuvp2Qw0AfS+1Qmx2vLZ329N+tQQ7rIYZqqMPqZDmlXmigm0xzOmu7/6YbwBVKrCFpj7DfQAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Button component U"
        title=""
        src="/static/9f287bbecf601e29c6c1b1952ecb6846/29fe9/button-component-u.png"
        srcset="/static/9f287bbecf601e29c6c1b1952ecb6846/29fe9/button-component-u.png 151w"
        sizes="(max-width: 151px) 100vw, 151px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></span>
<div class="paragraph-module--paragraph--e296c">Going up to the direct parent we find component <span class="code-module--inline--5f9ed">y</span>, which is the component we are looking for.
We inspect its source and click the pretty print button in oder to see what we are working with.</div>
<span><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 206px; 
                                margin-top: 10px;
                                margin-bottom: 10px;
                                margin-left: unset;
                                margin-right: unset;
                            "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/23ef94e2793863d698744a1935b52acd/a414c/view-source.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 36%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABZklEQVR42o1RS0sCURidn1GgkeYj31mZimWlCBX5zmZGxEwk2kT/I4qI1uWix6IfYhqahmF7s2YmmtKdrU7cO2htghaH833ncM/97neZSess/gOjZWbI4zor9CYnJowOCqIZzNPUZ34fMNlcMNvn/gTxLQ43Crv78C6EEEnwSLJbVPP5Q9RnSNDgdq3BDpXGBPUfIN6Y1gx/YI1O6PIuw+0LQqO3obCzB+uUBwxJJSAjLwZWwWXyYNPb2ORzYNO5IStQ9FgyjRSXxQabRSKVAZ/J47x4idBKVAm0OT0YVRtwdX2Dr34f7fYzup9dyLKs8LsMURQhihIk6Q2CIEKWP9DpvECSJAivAnrdHo6OT5Unkx2MqHQ4K15AEiWUSrdotZ5QrzfQaDygVrtHs/lIe6IP+nK5gmq1hkrljgYfHJ78fArZiWc+iEico1iPsQjHWIXjSh2Oc5QjA07wSh3nEE3wcHmX8A3lUyr5hRpYagAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="View source"
        title=""
        src="/static/23ef94e2793863d698744a1935b52acd/a414c/view-source.png"
        srcset="/static/23ef94e2793863d698744a1935b52acd/4edbd/view-source.png 175w,
/static/23ef94e2793863d698744a1935b52acd/a414c/view-source.png 206w"
        sizes="(max-width: 206px) 100vw, 206px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></span>
<div class="paragraph-module--paragraph--e296c">This brings us to something similar to:</div>
<div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token keyword" style="color:#c595c5">var</span><span class="token plain"> </span><span class="token function-variable function" style="color:#79b6f2">y</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c595c5">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">e</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">2</span><span class="token plain">    </span><span class="token keyword" style="color:#c595c5">var</span><span class="token plain"> t </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> e</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">look</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">3</span><span class="token plain">        n </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c595c5">void</span><span class="token plain"> </span><span class="token number" style="color:#ff8b50">0</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">===</span><span class="token plain"> t </span><span class="token operator" style="color:#89ddff">?</span><span class="token plain"> m</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token constant" style="color:#5a9bcf">FILLED</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> t</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">4</span><span class="token plain">        i </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> e</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">color</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">5</span><span class="token plain">        u </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c595c5">void</span><span class="token plain"> </span><span class="token number" style="color:#ff8b50">0</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">===</span><span class="token plain"> i </span><span class="token operator" style="color:#89ddff">?</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">T</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token constant" style="color:#5a9bcf">BRAND</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> i</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">6</span><span class="token plain">        _ </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> e</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">borderColor</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">7</span><span class="token plain">        </span><span class="token constant" style="color:#5a9bcf">O</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> e</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">hover</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">8</span><span class="token plain">        v </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> e</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">size</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">9</span><span class="token plain">        y </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c595c5">void</span><span class="token plain"> </span><span class="token number" style="color:#ff8b50">0</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">===</span><span class="token plain"> v </span><span class="token operator" style="color:#89ddff">?</span><span class="token plain"> g</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token constant" style="color:#5a9bcf">MEDIUM</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> v</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">10</span><span class="token plain">        </span><span class="token comment" style="color:#3a454d">/* other props... */</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">11</span><span class="token plain">    </span><span class="token comment" style="color:#3a454d">// local vars, hooks...</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">12</span><span class="token plain">    </span><span class="token keyword" style="color:#c595c5">var</span><span class="token plain"> ie </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token number" style="color:#ff8b50">0</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">jsx</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">tE</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token comment" style="color:#3a454d">/* react elements... */</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">13</span><span class="token plain">    </span><span class="token keyword control-flow" style="color:#c595c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">te</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">14</span><span class="token plain">        </span><span class="token comment" style="color:#3a454d">// alternative return...</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">15</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">16</span><span class="token plain">    </span><span class="token keyword control-flow" style="color:#c595c5">return</span><span class="token plain"> ie</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">17</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">18</span><span class="token plain">y</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access maybe-class-name">Looks</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> m</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">19</span><span class="token plain">y</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access maybe-class-name">Colors</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">T</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">20</span><span class="token plain">y</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access maybe-class-name">BorderColors</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">O</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">21</span><span class="token plain">y</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access maybe-class-name">Hovers</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> v</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">22</span><span class="token plain">y</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access maybe-class-name">Sizes</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> g</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">23</span><span class="token plain">y</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method-variable function-variable method function property-access maybe-class-name" style="color:#79b6f2">Link</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c595c5">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">e</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">24</span><span class="token plain">    </span><span class="token comment" style="color:#3a454d">// component source...</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">25</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">26</span><span class="token plain"></span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">A</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> y</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div>
<div class="paragraph-module--paragraph--e296c">Going up to the top of the module, we find that our component is exported directly (line 9):</div>
<div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token number" style="color:#ff8b50">191940</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">e</span><span class="token parameter punctuation" style="color:#89ddff">,</span><span class="token parameter" style="color:#ff8b50"> t</span><span class="token parameter punctuation" style="color:#89ddff">,</span><span class="token parameter" style="color:#ff8b50"> n</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">2</span><span class="token plain">    </span><span class="token string" style="color:#c3e88d">&quot;use strict&quot;</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">3</span><span class="token plain">    n</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">d</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">4</span><span class="token plain">        </span><span class="token function-variable function" style="color:#79b6f2">iL</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> m</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">5</span><span class="token plain">        </span><span class="token function-variable function maybe-class-name" style="color:#79b6f2">Tt</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">T</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">6</span><span class="token plain">        </span><span class="token function-variable function" style="color:#79b6f2">lN</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> v</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">7</span><span class="token plain">        </span><span class="token function-variable function maybe-class-name" style="color:#79b6f2">Ph</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> g</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">8</span><span class="token plain">        </span><span class="token function-variable function" style="color:#79b6f2">nY</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">S</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">9</span><span class="token plain">        </span><span class="token function-variable function maybe-class-name" style="color:#79b6f2">Co</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">A</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">10</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div>
<div class="paragraph-module--paragraph--e296c">To explain the codeblock above: it starts with a key in an object literal, which is the id of the module.
The following value is the module function holding the module&#x27;s code.
When evaluating the module webpack will pass its own versions of <span class="code-module--inline--5f9ed">module</span>, <span class="code-module--inline--5f9ed">module.exports</span>, <span class="code-module--inline--5f9ed">require</span> as arguments in this order.
<span class="code-module--inline--5f9ed">require.d</span> is a helper to define getters.</div>
<div class="paragraph-module--paragraph--e296c">Jumping back to the button component itself, we will take a look at two approaches for retrieving it.
We do so by formulating a search predicate in order to match it within webpack&#x27;s export cache.</div>
<div class="paragraph-module--paragraph--e296c">When formulating predicates you have to consider how specific it should be.
When being very specific you are unlikely to accidentally find a different module that also matches the predicate.
However, a very specific predicate may also break very fast when Discord changes something in their internals.
You can check how many potentially wrong modules your predicate currently matches by passing <span class="code-module--inline--5f9ed">first: false</span> to <span class="code-module--inline--5f9ed">getModule()</span>.</div>
<div class="paragraph-module--paragraph--e296c">Our first approach is the currently most common way to build search predicates for components.
We do not any have export names or component <span class="code-module--inline--5f9ed">displayName</span>s to work with.
However, the component possibly still accesses the React component props it recieves.
We can use these to create a predicate using <a href="https://docs.betterdiscord.app/api/filters#bystrings" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">Filters.byStrings(...strings)</span></a>.
Looking at the component source, we can figure out which accesssed props could be a suitable for our query.</div>
<div class="paragraph-module--paragraph--e296c">In this case <span class="code-module--inline--5f9ed">submittingStartedLabel</span> and <span class="code-module--inline--5f9ed">submittingFinishedLabel</span> are two props with fairly specific names, which are accessed within the component.
And indeed, we only get a single match using either of them:</div>
<div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token maybe-class-name">Filters</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">byStrings</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;submittingStartedLabel&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#79b6f2">searchExports</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#79b6f2">first</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span></div></div></div>
<div class="paragraph-module--paragraph--e296c">If we are afraid these props are too special and might be removed from the component in the future, we can combine multiple of the more &quot;basic&quot; props.
The query below returns 12 matches:</div>
<div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token maybe-class-name">Filters</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">byStrings</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;look&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;submitting&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#79b6f2">searchExports</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#79b6f2">first</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span></div></div></div>
<div class="paragraph-module--paragraph--e296c">One thing we can change is to add the <span class="code-module--inline--5f9ed">.</span> from accessing the property in front.
Discord&#x27;s toolchain (usually) transpiles destructuring props into regular property access operations.
This cuts down our number of matches to 2:</div>
<div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token maybe-class-name">Filters</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">byStrings</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;.look&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;.submitting&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#79b6f2">searchExports</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#79b6f2">first</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span></div></div></div>
<div class="paragraph-module--paragraph--e296c">We can also take a look at the &quot;wrong&quot; matches and attempt to find code fragments that are present in our component but not the others.
In this case the other component for example does not access an <span class="code-module--inline--5f9ed">onClick</span> prop, leaving us with this possible query for the button component:</div>
<div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token maybe-class-name">Button</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token maybe-class-name">Filters</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">byStrings</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;.look&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;.submitting&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;.onClick&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#79b6f2">searchExports</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div>
<div class="paragraph-module--paragraph--e296c">Our second approach for finding the button component can only be applied in special cases.
Looking at our component source code again, we happen to have a handful of assignments right below our function component.
These add enum-like objects and another associated function component.
Knowing this, we can attempt to use <a href="https://docs.betterdiscord.app/api/filters#byprops" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">Filters.byProps(...props)</span></a> and match these properties instead of matching the component source:</div>
<div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token maybe-class-name">Button</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token maybe-class-name">Filters</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">byProps</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;Link&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;Colors&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#79b6f2">searchExports</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div>
<div class="paragraph-module--paragraph--e296c">If a component or function is <strong>not exported</strong> from its module, things become a lot more complicated.
More advanced techniques like chain patching or dummy rendering plus traversing React fiber will be required.</div>
<h2 class="heading-module--heading--1cb7a" id="finding-a-store"><a class="heading-module--link--3f9ce" href="/guides/bd/getting-started/#finding-a-store">#</a>Finding a store</h2>
<div class="paragraph-module--paragraph--e296c">Discord uses the <a href="https://facebook.github.io/flux" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Flux</a> architecture to organize their data.
You can read more about this in <a class="anchor-module--anchor--32227 anchor-module--text--f2bb6" href="/guides/bd/flux/">Flux and Discord</a>.
In the Flux architecture <em>Stores</em> hold all of the relevant state information.</div>
<div class="paragraph-module--paragraph--e296c">As an example, we will attempt to find the <span class="code-module--inline--5f9ed">UserStore</span>.
As our entry point for reverse engineering we pick the component responsible for rendering the account panel below the channel list.
We start by searching through the component tree for a component which does not receive the data as props from a parent.
This brings us to a component called <span class="code-module--inline--5f9ed">Tee</span>:</div>
<div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token keyword" style="color:#c595c5">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#79b6f2">Tee</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">2</span><span class="token plain">    </span><span class="token keyword" style="color:#c595c5">var</span><span class="token plain"> e </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token number" style="color:#ff8b50">0</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">e7</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">[</span><span class="token constant" style="color:#5a9bcf">Y</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c595c5">default</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token keyword" style="color:#c595c5">function</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">3</span><span class="token plain">            </span><span class="token keyword control-flow" style="color:#c595c5">return</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">Y</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c595c5">default</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">getCurrentUser</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">4</span><span class="token plain">        </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">5</span><span class="token plain">        </span><span class="token comment" style="color:#3a454d">// some other variables...</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">6</span><span class="token plain">        a </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#c595c5">null</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">==</span><span class="token plain"> e </span><span class="token operator" style="color:#89ddff">?</span><span class="token plain"> </span><span class="token keyword" style="color:#c595c5">void</span><span class="token plain"> </span><span class="token number" style="color:#ff8b50">0</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> e</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">7</span><span class="token plain">        l </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token maybe-class-name">He</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access maybe-class-name">Ok</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">useSetting</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">8</span><span class="token plain">        c </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> o</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">useMemo</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token keyword" style="color:#c595c5">function</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">9</span><span class="token plain">            </span><span class="token keyword control-flow" style="color:#c595c5">return</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#c595c5">null</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">!=</span><span class="token plain"> l </span><span class="token operator" style="color:#89ddff">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token number" style="color:#ff8b50">0</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">10</span><span class="token plain">            </span><span class="token constant" style="color:#5a9bcf">Z8</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token constant" style="color:#5a9bcf">Z</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">l</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#c595c5">null</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">11</span><span class="token plain">        </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">[</span><span class="token plain">l</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">12</span><span class="token plain">        u </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token number" style="color:#ff8b50">0</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">cj</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">[</span><span class="token maybe-class-name">Hc</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token constant" style="color:#5a9bcf">Z</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token keyword" style="color:#c595c5">function</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">13</span><span class="token plain">            </span><span class="token keyword control-flow" style="color:#c595c5">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">14</span><span class="token plain">                </span><span class="token literal-property property" style="color:#79b6f2">streaming</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#c595c5">null</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">!=</span><span class="token plain"> </span><span class="token maybe-class-name">Hc</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token constant" style="color:#5a9bcf">Z</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">findActivity</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token keyword" style="color:#c595c5">function</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">e</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">15</span><span class="token plain">                    </span><span class="token keyword control-flow" style="color:#c595c5">return</span><span class="token plain"> e</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">===</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">Z</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token constant" style="color:#5a9bcf">IIU</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token constant" style="color:#5a9bcf">STREAMING</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">16</span><span class="token plain">                </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">17</span><span class="token plain">                </span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">18</span><span class="token plain">                </span><span class="token literal-property property" style="color:#79b6f2">status</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token maybe-class-name">Hc</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token constant" style="color:#5a9bcf">Z</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">getStatus</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">19</span><span class="token plain">            </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">20</span><span class="token plain">        </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">21</span><span class="token plain">        f </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> u</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">streaming</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">22</span><span class="token plain">        d </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> u</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">status</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">23</span><span class="token plain">        p </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token number" style="color:#ff8b50">0</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">e7</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">[</span><span class="token plain">oy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token constant" style="color:#5a9bcf">Z</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token keyword" style="color:#c595c5">function</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">24</span><span class="token plain">            </span><span class="token keyword control-flow" style="color:#c595c5">return</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#c595c5">null</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">!=</span><span class="token plain"> a </span><span class="token operator" style="color:#89ddff">&amp;&amp;</span><span class="token plain"> oy</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token constant" style="color:#5a9bcf">Z</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">isSpeaking</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">25</span><span class="token plain">        </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">26</span><span class="token plain">    </span><span class="token comment" style="color:#3a454d">// rest...</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">27</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span></div></div></div>
<div class="paragraph-module--paragraph--e296c">There is a fairly obvious call to <span class="code-module--inline--5f9ed">getCurrentUser()</span> in there.
But let&#x27;s figure out what the rest around it is.</div>
<div class="paragraph-module--paragraph--e296c">We can take a closer look at the component by selecting it in React devtools and typing <span class="code-module--inline--5f9ed">$r</span> in console.
The <span class="code-module--inline--5f9ed">type</span> will contain the function, which we can help us figure out what values captured variables contain.
If we expand the function, we see a <span class="code-module--inline--5f9ed">[[Scopes]]</span> entry at the bottom.
We can look through these manually or in case one scope of captured variables is very large:
right click, store as global variable and then access an entry like <span class="code-module--inline--5f9ed">temp1.object.s</span>.</div>
<span><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; 
                                margin-top: 10px;
                                margin-bottom: 10px;
                                margin-left: unset;
                                margin-right: unset;
                            "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/9f8e54ab2aae2777b790e5fb54ceedce/00b70/tee-scopes.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 24%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAApklEQVR42o3QW2rDMBCFYa2ktWVbHkWjmx07cSjZ/67+gCCBQhvy8D0MwxwOY6pcKHljlkDXj//67oa3+yeT5xX1CTtMfHVDO/zLp8FmkZ3iC6oFEUV8pLcTXePorXsFfdLS3PTOHn441jvneiWUAx83fNwJ+WizHeVXw3dM9BUNmZwXztuVlGuzrDtBM6WsTUyVkxasJJyPOCdMTtrvxSunkBjGmQd+7ZCjprexMQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Tee scopes"
        title=""
        src="/static/9f8e54ab2aae2777b790e5fb54ceedce/8c557/tee-scopes.png"
        srcset="/static/9f8e54ab2aae2777b790e5fb54ceedce/4edbd/tee-scopes.png 175w,
/static/9f8e54ab2aae2777b790e5fb54ceedce/13ae7/tee-scopes.png 350w,
/static/9f8e54ab2aae2777b790e5fb54ceedce/8c557/tee-scopes.png 700w,
/static/9f8e54ab2aae2777b790e5fb54ceedce/00b70/tee-scopes.png 733w"
        sizes="(max-width: 700px) 100vw, 700px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></span>
<div class="paragraph-module--paragraph--e296c">Another helpful technique to help with reverse engineering is to set a breakpoint near the end of the function/component.
Then attempt to trigger a call/rerender.
When the breakpoint is hit, we can take a look at which values captured as well as local variables hold.</div>
<div class="paragraph-module--paragraph--e296c">It turns out our captured variable <span class="code-module--inline--5f9ed">s</span> is Discord&#x27;s Flux module.
And the functions <span class="code-module--inline--5f9ed">s.e7</span> and <span class="code-module--inline--5f9ed">s.cj</span> are the mangled <span class="code-module--inline--5f9ed">useStateFromStores</span> and <span class="code-module--inline--5f9ed">useStateFromStoresObject</span> hooks.
<span class="code-module--inline--5f9ed">Y.default</span> is the store we are searching.
(Yes, big surprise...)
Besides <span class="code-module--inline--5f9ed">getCurrentUser</span> we for example also find the functions <span class="code-module--inline--5f9ed">getUsers</span>, <span class="code-module--inline--5f9ed">getUser</span> or <span class="code-module--inline--5f9ed">findByTag</span> there.</div>
<div class="codetabs-module--container--65389"><div class="codetabs-module--tabs--3225b"><div class="codetabs-module--item--ab659 codetabs-module--active--196a5">Production code</div><div class="codetabs-module--item--ab659">Reverse engineered</div></div><div class="codetabs-module--content--d3d01 code-module--no-margin--74dce"><div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token keyword" style="color:#c595c5">var</span><span class="token plain"> e </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token number" style="color:#ff8b50">0</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> s</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">e7</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">[</span><span class="token constant" style="color:#5a9bcf">Y</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c595c5">default</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token keyword" style="color:#c595c5">function</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">2</span><span class="token plain">        </span><span class="token keyword control-flow" style="color:#c595c5">return</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">Y</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c595c5">default</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">getCurrentUser</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">3</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">4</span><span class="token plain">    a </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#c595c5">null</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">==</span><span class="token plain"> e </span><span class="token operator" style="color:#89ddff">?</span><span class="token plain"> </span><span class="token keyword" style="color:#c595c5">void</span><span class="token plain"> </span><span class="token number" style="color:#ff8b50">0</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> e</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div></div></div>
<div class="paragraph-module--paragraph--e296c">Looking at our store, we can easily grab it using <a href="https://docs.betterdiscord.app/api/filters#byprops" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">Filters.byProps(...props)</span></a>.
Since it is exported as <span class="code-module--inline--5f9ed">default</span> export from its module, we do not need <span class="code-module--inline--5f9ed">searchExports: true</span>.
BetterDiscord checks our filter on both the whole exports object as well the default export by default.
Since using <span class="code-module--inline--5f9ed">&quot;getUser&quot;</span> or <span class="code-module--inline--5f9ed">&quot;getCurrentUser&quot;</span> on their own gives us more than 1 match, we combine them:</div>
<div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token maybe-class-name">UserStore</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token maybe-class-name">Filters</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">byProps</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;getUser&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;getCurrentUser&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div>
<div class="paragraph-module--paragraph--e296c">Alternatively, we can grab the store by its name:</div>
<div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token maybe-class-name">UserStore</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">exports</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> exports</span><span class="token operator" style="color:#89ddff">?.</span><span class="token plain">constructor</span><span class="token operator" style="color:#89ddff">?.</span><span class="token plain">displayName </span><span class="token operator" style="color:#89ddff">===</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;UserStore&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div>
<div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token maybe-class-name">UserStore</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">exports</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#c595c5">typeof</span><span class="token plain"> exports</span><span class="token operator" style="color:#89ddff">?.</span><span class="token plain">getName </span><span class="token operator" style="color:#89ddff">===</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;function&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">&amp;&amp;</span><span class="token plain"> exports</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">getName</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">===</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;UserStore&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div>
<h2 class="heading-module--heading--1cb7a" id="patching"><a class="heading-module--link--3f9ce" href="/guides/bd/getting-started/#patching">#</a>Patching</h2>
<div class="paragraph-module--paragraph--e296c">Now that we know how to find modules, we can take a look at how we can hook into a function exported by one.
This is done using the already mentioned <a href="https://docs.betterdiscord.app/api/patcher" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">BdApi.Patcher</span></a>.
It allows us to change the behaviour of existing functions at runtime, executing our own code before, after or instead of the original.
This is commonly referred to as <em>monkey patching</em> or simply <em>patching</em>.</div>
<div class="paragraph-module--paragraph--e296c">There is three different kinds of patches the <a href="https://docs.betterdiscord.app/api/patcher" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">BdApi.Patcher</span></a> offers.
Typically, you will use <a href="https://docs.betterdiscord.app/api/patcher/#before" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">before</span></a> patches when you want to intercept and manipulate the incoming function arguments,
<a href="https://docs.betterdiscord.app/api/patcher/#after" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">after</span></a> patches when you want to intercept and manipulate the resulting return value
and <a href="https://docs.betterdiscord.app/api/patcher/#instead" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">instead</span></a> patches when the behaviour should be changed completely or for other complex scenarios.</div>
<div class="paragraph-module--paragraph--e296c">In React components you typically want to modify the return value of the original in order to change the elements rendered.
This means we want to create an <span class="code-module--inline--5f9ed">after</span> patch.
For class components the target function is <span class="code-module--inline--5f9ed">Component.prototype.render()</span> usually.
For function components it is the component itself.</div>
<div class="paragraph-module--paragraph--e296c">Note that the patcher expects an <strong>object</strong> containing the target function and the <strong>key</strong> of the function entry.
You may have to adjust your filter and/or use <span class="code-module--inline--5f9ed">defaulExport: false</span> when searching with the intent to patch.</div>
<div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> myComponentModule </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token comment" style="color:#3a454d">/* filter */</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">3</span><span class="token plain"></span><span class="token maybe-class-name">Patcher</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">after</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;MyPluginName&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> myComponentModule</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;myComponentKey&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">thisObject</span><span class="token parameter punctuation" style="color:#89ddff">,</span><span class="token parameter" style="color:#ff8b50"> originalArgs</span><span class="token parameter punctuation" style="color:#89ddff">,</span><span class="token parameter" style="color:#ff8b50"> returnValue</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">4</span><span class="token plain">    </span><span class="token console class-name" style="color:#fac863">console</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;Original function received arguments:&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> originalArgs</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">5</span><span class="token plain">    </span><span class="token console class-name" style="color:#fac863">console</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;Original function returned value:&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> returnValue</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">6</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div>
<div class="paragraph-module--paragraph--e296c">After the component has been patched, we still need to trigger a rerender.
We should see output being logged into the console for each instance of the patched component that renders onscreen.</div>
<span><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; 
                                margin-top: 10px;
                                margin-bottom: 10px;
                                margin-left: unset;
                                margin-right: unset;
                            "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/9330ecfc8056cb2d3468fd489ee324e2/d48f1/console-output.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 22.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAhUlEQVR42p3PSw7CMAxF0e4FUEUbO42dj4rY/7YuSotawQSJwZseXw9zUNbHE88V80rOjdpWlpTJpVHNcFWSCKbKNCtziMTF0Ji2iSbuU+ByHRn+BuM3KFx3MP4G4wn2gLPQPsHbyNAvbqDvoOdGqR10vDRKSrgKKQRM5F2oB9QXZDlefgEPJXz7VM8dLwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Console output"
        title=""
        src="/static/9330ecfc8056cb2d3468fd489ee324e2/8c557/console-output.png"
        srcset="/static/9330ecfc8056cb2d3468fd489ee324e2/4edbd/console-output.png 175w,
/static/9330ecfc8056cb2d3468fd489ee324e2/13ae7/console-output.png 350w,
/static/9330ecfc8056cb2d3468fd489ee324e2/8c557/console-output.png 700w,
/static/9330ecfc8056cb2d3468fd489ee324e2/d48f1/console-output.png 796w"
        sizes="(max-width: 700px) 100vw, 700px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></span>
<div class="paragraph-module--paragraph--e296c">The example above is output from a function component.
The first argument received is the component props just as you would expect with a function component.
The second argument is an empty object since the component does not forward any refs (or makes use of React&#x27;s legacy context API).</div>
<div class="paragraph-module--paragraph--e296c">As to be expected, the return value is what a call to <a href="https://react.dev/reference/react/createElement" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">React.createElement()</span></a> returns - a tree of React element nodes.
The most interesting properties on these nodes are <span class="code-module--inline--5f9ed">type</span>, which indicates what kind of element or component this tree node is,
and <span class="code-module--inline--5f9ed">props</span>, which is the props passed to the HTML element or React component.
Child nodes are found under <span class="code-module--inline--5f9ed">props.children</span>.</div>
<div class="paragraph-module--paragraph--e296c">If we want to render our own elements somewhere, we have to find the node we want to append them to.
This can be done by using tree/graph traversal algorithms like <a href="https://en.wikipedia.org/wiki/Depth-first_search" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">DFS</a> or <a href="https://en.wikipedia.org/wiki/Breadth-first_search" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">BFS</a>.
You can find examples of utility functions for tree traversal in <a href="https://docs.betterdiscord.app/api/utils#findintree" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">BdApi.Utils</span></a> (DFS),
<a href="https://github.com/rauenzi/BDPluginLibrary/blob/master/src/modules/utilities.js#L122-L165" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Zere&#x27;s Plugin Library</a> (DFS)
or <a href="https://github.com/Zerthox/BetterDiscord-Plugins/blob/069cac71f1129fc5ca29af46cf7a50675b87cf03/dium/src/utils/react.ts#L36-L59" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">my own plugin repo</a> (BFS).</div>
<div class="paragraph-module--paragraph--e296c">With a utility function to search the tree for a specific node, appending new elements could look like this:</div>
<div class="codetabs-module--container--65389"><div class="codetabs-module--tabs--3225b"><div class="codetabs-module--item--ab659 codetabs-module--active--196a5">JSX</div><div class="codetabs-module--item--ab659">JS</div></div><div class="codetabs-module--content--d3d01 code-module--no-margin--74dce"><div class="code-module--codeblock--bfd94"><div class="prism-code language-jsx code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#79b6f2">findInReactTree</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">tree</span><span class="token parameter punctuation" style="color:#89ddff">,</span><span class="token parameter" style="color:#ff8b50"> filter</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">Utils</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">findInTree</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">tree</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> filter</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#79b6f2">walkable</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">[</span><span class="token string" style="color:#c3e88d">&quot;props&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;children&quot;</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">3</span><span class="token plain"></span><span class="token maybe-class-name">Patcher</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">after</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;MyPluginName&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> myComponentModule</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;myComponentKey&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">thisObject</span><span class="token parameter punctuation" style="color:#89ddff">,</span><span class="token parameter" style="color:#ff8b50"> </span><span class="token parameter punctuation" style="color:#89ddff">[</span><span class="token parameter" style="color:#ff8b50">props</span><span class="token parameter punctuation" style="color:#89ddff">]</span><span class="token parameter punctuation" style="color:#89ddff">,</span><span class="token parameter" style="color:#ff8b50"> returnValue</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">4</span><span class="token plain">    </span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> foundNode </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">findInReactTree</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">returnValue</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">node</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> node</span><span class="token operator" style="color:#89ddff">?.</span><span class="token plain">type </span><span class="token operator" style="color:#89ddff">===</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;li&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">5</span><span class="token plain">    </span><span class="token keyword control-flow" style="color:#c595c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">foundNode</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">6</span><span class="token plain">        foundNode</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">children</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">[</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">7</span><span class="token plain">            foundNode</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">children</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">8</span><span class="token plain">            </span><span class="token tag punctuation" style="color:#89ddff">&lt;</span><span class="token tag" style="color:#f07178">div</span><span class="token tag punctuation" style="color:#89ddff">&gt;</span><span class="token plain-text">My elements</span><span class="token tag punctuation" style="color:#89ddff">&lt;/</span><span class="token tag" style="color:#f07178">div</span><span class="token tag punctuation" style="color:#89ddff">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">9</span><span class="token plain">        </span><span class="token punctuation" style="color:#89ddff">]</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">10</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#c595c5">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">11</span><span class="token plain">        </span><span class="token console class-name" style="color:#fac863">console</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">error</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;node was not found&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">12</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">13</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div></div></div>
<div class="paragraph-module--paragraph--e296c">Remember to undo the patches you did in <span class="code-module--inline--5f9ed">start()</span> when your plugin is stopped:</div>
<div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token function" style="color:#79b6f2">stop</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">2</span><span class="token plain">    </span><span class="token maybe-class-name">Patcher</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">unpatchAll</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;MyPluginName&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">3</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span></div></div></div>
<h2 class="heading-module--heading--1cb7a" id="further-information"><a class="heading-module--link--3f9ce" href="/guides/bd/getting-started/#further-information">#</a>Further information</h2>
<div class="paragraph-module--paragraph--e296c">Hopefully this helped you a bit while getting started with developing BetterDiscord plugins and using Discord&#x27;s internals.
Make sure to check the <a href="https://docs.betterdiscord.app/" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">BetterDiscord documentation</a> for information.
Reading the source code of other plugins can also help a lot when learning.
<em>(Maybe not plugins using <span class="code-module--inline--5f9ed">BDFDB</span> by DevilBro as they can be difficult to read.)</em></div>
<div class="paragraph-module--paragraph--e296c">React&#x27;s internals and the React fiber have not been touched here at all, but may be interesting for plugin development in some cases.
Same thing goes for Discord&#x27;s internal state management system using event dispatching and Flux.</div>
<div class="paragraph-module--paragraph--e296c">If you have any questions, the <span class="code-module--inline--5f9ed">#programming</span> channel in the <a href="https://discord.gg/0Tmfo5ZbORCRqbAd" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">BetterDiscord server</a> is the place to ask.</div></div></div><div class="footer-module--footer--d155e"><div class="footer-module--left--d6390">Copyright 2021 Zerthox</div><div class="footer-module--right--83036"><a href="https://github.com/zerthox" class="footer-module--link--06b40" target="_blank" rel="noopener noreferrer">GitHub</a> | <a href="https://github.com/zerthox/zerthox.github.io" class="footer-module--link--06b40" target="_blank" rel="noopener noreferrer">Source</a></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/guides/bd/getting-started/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-861e609e3fd3b4dbc338.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-3a4ed80d4c24f94c0e03.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-473150e7ece2e59e3727.js\"],\"component---src-pages-guides-index-tsx\":[\"/component---src-pages-guides-index-tsx-878d8e9e0167381d0e5e.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-74aabbfe8d00fa2e98c9.js\"],\"component---src-templates-markdown-tsx-content-file-path-src-pages-drafts-bd-reverse-engineering-index-mdx\":[\"/component---src-templates-markdown-tsx-content-file-path-src-pages-drafts-bd-reverse-engineering-index-mdx-d6a31756ca49c812bbc4.js\"],\"component---src-templates-markdown-tsx-content-file-path-src-pages-guides-bd-flux-index-mdx\":[\"/component---src-templates-markdown-tsx-content-file-path-src-pages-guides-bd-flux-index-mdx-e1b277f4fe463c5e26a6.js\"],\"component---src-templates-markdown-tsx-content-file-path-src-pages-guides-bd-getting-started-index-mdx\":[\"/component---src-templates-markdown-tsx-content-file-path-src-pages-guides-bd-getting-started-index-mdx-734d896fdf3649bbd5b9.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="3b8547d0978142162e22";</script><script src="/webpack-runtime-dd04d764eb4be2a65001.js" async></script><script src="/framework-e45c261c59eb6980e090.js" async></script><script src="/app-861e609e3fd3b4dbc338.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>