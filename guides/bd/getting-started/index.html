<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.21.1"/><meta data-react-helmet="true" name="description" content="This guide has not been updated! The Discord update on 27 September 2022 contained some major changes to fundamental characteristics of…"/><meta data-react-helmet="true" property="og:title" content="Getting started with BetterDiscord Plugin development - Zerthox"/><meta data-react-helmet="true" property="og:description" content="This guide has not been updated! The Discord update on 27 September 2022 contained some major changes to fundamental characteristics of…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Zerthox"/><meta data-react-helmet="true" name="twitter:title" content="Getting started with BetterDiscord Plugin development - Zerthox"/><meta data-react-helmet="true" name="twitter:description" content="This guide has not been updated! The Discord update on 27 September 2022 contained some major changes to fundamental characteristics of…"/><style data-href="/styles.09ee60060b05fccf9ee2.css" data-identity="gatsby-global-css">.avatar-module--avatar--m3PM0{background-size:100%;border-radius:50%}.user-module--container--swu5C{align-items:center;color:hsla(0,0%,100%,.7);display:flex;flex-direction:row;padding:0 5px;text-decoration:none}.user-module--container--swu5C:hover .user-module--name--1ThEg{color:#fff}.user-module--container--swu5C:hover .user-module--avatar--PQo6S{opacity:1}.user-module--name--1ThEg{margin-left:5px}.user-module--avatar--PQo6S{opacity:.7}.header-module--header--oNryi{background-color:#303236;padding:5px 10%;-webkit-user-select:none;user-select:none;z-index:1}.header-module--header--oNryi,.header-module--title--eKtuz{align-items:center;display:flex;flex-direction:row;justify-content:center}.header-module--title--eKtuz{color:#fff;font-size:30px;font-weight:600;padding:0 30px;text-decoration:none;text-shadow:0 0 20px hsla(0,0%,100%,.3)}.header-module--name--cPpcM{margin-left:10px}.header-module--bar--1KRM5{align-items:center;display:flex;flex-direction:row;flex-grow:1;max-width:800px}.header-module--item--4\+JRs{border-radius:3px;color:#fff;margin:0 10px;padding:3px 10px;text-decoration:none;transition:all .15s ease-in-out}.header-module--item--4\+JRs.header-module--active--WDr-O,.header-module--item--4\+JRs:hover{background-color:rgba(0,0,0,.3)}.footer-module--footer--0VXg2{background-color:#242628;display:flex;font-size:13px;padding:5px 20px;-webkit-user-select:none;user-select:none}.footer-module--left--1jkDK{margin-right:auto}.footer-module--right--gwNjW{margin-left:auto}.footer-module--link--BrQFQ{color:hsla(0,0%,100%,.7);text-decoration:none;transition:all .15s ease-in-out}.footer-module--link--BrQFQ:hover{color:#fff}
/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}body{background:#000;margin:0}.layout-module--main--Pw-Zk{color:hsla(0,0%,100%,.7);display:grid;font-family:sans-serif;grid-template-columns:auto;grid-template-rows:auto 1fr auto;height:100vh;justify-content:stretch;line-height:1.5;min-width:700px}.layout-module--body--o7g\+O{align-items:center;background-color:#3d3f43;display:flex;flex-direction:column;padding:20px 10%}.layout-module--title--wFqxL{align-items:center;display:flex;flex-direction:column;margin-bottom:20px}.layout-module--heading--3S6un{color:#fff;font-size:40px;text-align:center;text-shadow:0 0 20px hsla(0,0%,100%,.3)}.layout-module--info--gRD5K{align-items:center;display:flex;flex-direction:row}.layout-module--author--NOQUs{color:hsla(0,0%,100%,.7);display:flex;flex-direction:row;font-size:20px}.layout-module--date--IR53n{color:hsla(0,0%,100%,.3);font-size:14px;margin-left:10px}.layout-module--updated--gRiqr{font-style:italic}.layout-module--separator--PqWxh{font-size:1.2em;margin:0 1ch}.layout-module--content--unkwM{background-color:#242628;border-radius:3px;margin:0 10px;max-width:1000px;padding:30px 60px 40px}._404-module--container--tVehg{align-items:center;display:flex;flex-direction:column;margin-bottom:20px;margin-top:10%}._404-module--title--mduE6{color:#fff;font-size:75px;text-shadow:0 0 20px hsla(0,0%,100%,.3)}._404-module--subtitle--2p60M{color:hsla(0,0%,100%,.7);font-size:30px;text-shadow:0 0 20px hsla(0,0%,100%,.3)}._404-module--link--Nf0k-{color:hsla(0,0%,100%,.7);font-size:18px;margin-top:5px;text-decoration:none;transition:all .15s ease-in-out}._404-module--link--Nf0k-:hover{color:#fff}.anchor-module--anchor--MiJ6w{color:hsla(0,0%,100%,.7);cursor:pointer;text-decoration:none;transition:all .15s ease-in-out}.anchor-module--anchor--MiJ6w:hover{color:#fff}.anchor-module--anchor--MiJ6w.anchor-module--text--8rtuh{background-color:hsla(0,0%,100%,.07);border-bottom:1px solid hsla(0,0%,100%,.2);padding:1px 2px}.anchor-module--anchor--MiJ6w.anchor-module--text--8rtuh:hover{background-color:hsla(0,0%,100%,.2);border-color:#fff}.paragraph-module--paragraph--4pbAk{margin:5px 0;text-align:justify}.paragraph-module--paragraph--4pbAk img{max-width:100%}.heading-module--heading--HLeqp{margin:1.5em 0 .5em -2px;padding-left:2px;position:relative}.heading-module--heading--HLeqp:hover .heading-module--link--P5zon{opacity:.5}.heading-module--heading--HLeqp:hover .heading-module--link--P5zon:hover{opacity:1}.heading-module--link--P5zon{color:#fff;cursor:pointer;opacity:0;padding:0 3px;position:absolute;right:100%;text-decoration:none;transition:all .15s ease-in-out;-webkit-user-select:none;user-select:none}.code-module--codeblock--v9lHR,.code-module--inline--X57bh{font-family:source-code-pro,Menlo,Monaco,Consolas,Liberation Mono,Courier New,Courier,monospace}.code-module--codeblock--v9lHR{background:#0f1010;border-radius:5px;display:block;font-size:14px;margin:10px 0;overflow-x:auto;padding:5px 10px 5px 4ch;position:relative;-o-tab-size:4;tab-size:4}.code-module--no-margin--dNzos .code-module--codeblock--v9lHR{margin:0}.code-module--content--PU5QZ{white-space:pre}.code-module--number--ixRWU{color:#3a454d;margin-left:-4ch;position:absolute;text-align:right;-webkit-user-select:none;user-select:none;width:3ch}.code-module--line--K-2Ur{margin-left:4ch}.code-module--inline--X57bh{background:#1a1b1e;border-radius:3px;font-size:14px;padding:1px 3px}.list-module--list--SKwT3{display:flex;flex-direction:column}.list-module--item--L-Lnj{border-radius:3px;display:flex;padding:20px 60px;position:relative}.list-module--item--L-Lnj:hover{background:#303236}.list-module--link--p3fDv{color:hsla(0,0%,100%,.7);cursor:pointer;display:flex;flex-direction:column;flex-grow:1;text-decoration:none;transition:all .15s ease-in-out}.list-module--title--g7Bz2{align-items:center;display:flex;flex-direction:row}.list-module--name--J\+fXm{font-size:18px;font-weight:600}.list-module--date--8e6rZ{color:hsla(0,0%,100%,.3);margin-left:10px}.list-module--description--ZLSj5{font-size:14px;max-width:600px}.list-module--author--gv9xh{align-items:center;cursor:default;display:flex;flex-direction:row;flex-grow:1;margin-left:1ch}.banner-module--banner--EjDoz{align-items:center;display:flex;flex-direction:row;margin:20px -20px;padding:10px}.banner-module--banner--EjDoz.banner-module--info--lg4mf{background-color:#364563}.banner-module--banner--EjDoz.banner-module--info--lg4mf .banner-module--icon--wAOLI{background-color:#5973a6}.banner-module--banner--EjDoz.banner-module--warn--U-aXh{background-color:#c76605}.banner-module--banner--EjDoz.banner-module--warn--U-aXh .banner-module--icon--wAOLI{background-color:#fa9938}.banner-module--icon--wAOLI{font-weight:700;margin:5px;padding:5px 10px}.banner-module--content--02eRd{margin:0 10px}.banner-module--content--02eRd.banner-module--bold--o\+KVG{font-weight:600}.codetabs-module--container--ZTiQf{display:flex;flex-direction:column}.codetabs-module--tabs--MiW6k{display:flex;flex-direction:row;margin-left:5px}.codetabs-module--item--q2WfT{border-radius:3px 3px 0 0;color:hsla(0,0%,100%,.7);cursor:pointer;margin:0 5px;padding:5px 15px;transition:all .15s ease-in-out}.codetabs-module--item--q2WfT:hover{background:rgba(15,16,16,.5);color:#fff}.codetabs-module--item--q2WfT.codetabs-module--active--GWpeh{background:#0f1010}.codetabs-module--content--09Aav>*{margin:0}</style><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="icon" href="/favicon-32x32.png?v=9298de8c14fc98a854bd9ec5a9e9d15c" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><title data-react-helmet="true">Getting started with BetterDiscord Plugin development - Zerthox</title></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout-module--main--Pw-Zk"><div class="header-module--header--oNryi"><a class="header-module--title--eKtuz" href="/"><div class="avatar-module--avatar--m3PM0" style="background-image:url(https://avatars.githubusercontent.com/zerthox);width:40px;height:40px"></div><span class="header-module--name--cPpcM">Zerthox</span></a><div class="header-module--bar--1KRM5"><a class="header-module--item--4+JRs" href="/">Home</a><a class="header-module--item--4+JRs header-module--active--WDr-O" href="/guides">Guides</a><a class="header-module--item--4+JRs" href="/about">About</a></div></div><div class="layout-module--body--o7g+O"><div class="layout-module--title--wFqxL"><div class="layout-module--heading--3S6un">Getting started with BetterDiscord Plugin development</div><div class="layout-module--info--gRD5K"><div class="layout-module--author--NOQUs">by <a href="https://github.com/zerthox" class="user-module--container--swu5C" target="_blank" rel="noopener noreferrer"><div class="user-module--avatar--PQo6S avatar-module--avatar--m3PM0" style="background-image:url(https://avatars.githubusercontent.com/zerthox);width:30px;height:30px"></div><div class="user-module--name--1ThEg">Zerthox</div></a></div><div class="layout-module--date--IR53n">14 January 2022<span class="layout-module--updated--gRiqr"> (Updated: <!-- -->20 August 2022<!-- -->)</span><span class="layout-module--separator--PqWxh">|</span><span>6<!-- -->min read</span></div></div></div><div class="layout-module--content--unkwM"><div class="banner-module--banner--EjDoz banner-module--warn--U-aXh"><div class="banner-module--icon--wAOLI">!</div><div class="banner-module--content--02eRd"><div class="paragraph-module--paragraph--4pbAk"><strong>This guide has not been updated!</strong></div><div class="paragraph-module--paragraph--4pbAk">The Discord update on 27 September 2022 contained some major changes to fundamental characteristics of their production code.
A lot of named exports have had their names minified and module exports became read-only properties.
This changes the way internals can be used substantially.</div></div></div><div class="banner-module--banner--EjDoz banner-module--warn--U-aXh"><div class="banner-module--icon--wAOLI">!</div><div class="banner-module--content--02eRd"><div class="paragraph-module--paragraph--4pbAk">This article assumes you are familiar with modern <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">JavaScript</a>
like <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">Arrow functions</a>,
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">Destructuring</a>
and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">Optional Chaining</a>
as well as the <a href="https://reactjs.org" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">React</a> UI library!</div></div></div><h2 class="heading-module--heading--HLeqp" id="environment"><a class="heading-module--link--P5zon" href="/guides/bd/getting-started/#environment">#</a>Environment</h2><div class="paragraph-module--paragraph--4pbAk">As you may already know, the Discord desktop application uses <a href="https://www.electronjs.org" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">Electron</a>.
The UI is created using <a href="https://reactjs.org" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">React</a> and all of the data is handled by a custom event system and a custom <a href="https://facebook.github.io/flux/" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">Flux</a> implementation.
Their source is most likely written in <a href="https://www.typescriptlang.org" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">TypeScript</a>, however that is mostly irrelevant for plugin development.
Everything is transpiled and then bundled together using <a href="https://webpack.js.org" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">webpack</a>.</div><div class="paragraph-module--paragraph--4pbAk">Thanks to being based on <a href="https://www.chromium.org/Home" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">Chromium</a>, Electron&#x27;s renderer window has the <a href="https://developer.chrome.com/docs/devtools/" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">Chrome DevTools</a>.
Since the Discord update on 25 January 2022 they are disabled by default.
You can reenable them in BetterDiscord&#x27;s developer settings.</div><div class="paragraph-module--paragraph--4pbAk"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:unset;margin-right:unset;max-width:688px;margin-top:10px;margin-bottom:10px">
      <a href="/static/4f1328e274d88a5a8c049d1e90d36d21/ebf47/bd-devtools-setting.png" class="gatsby-resp-image-link anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:27.42857142857143%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAuUlEQVQY04XQ3QqCQBAF4H2jysxV13XV9TdlRRMK664X6LanP+EYIkF18cGwsIc5w7LSwHRnVHUHFRcQoYbNJQ5uuLBX85rjKbJ3AlRNT5jOGzRmQHFs4UtNRJguApWRz3nieHPozhbohpGw6cEVMbwgmT+sw/4GzhtyP8LW8rDZcjCd1ajNCVKltDrV4e+qXP5EtX0Fy/KR3a+4PR9g093y0iAtGqikXES6pG3Wt/rGsgXytoe5jHgBHMGtuMBCWFwAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="BetterDiscord dev tools settings" title="BetterDiscord dev tools settings" src="/static/4f1328e274d88a5a8c049d1e90d36d21/ebf47/bd-devtools-setting.png" srcSet="/static/4f1328e274d88a5a8c049d1e90d36d21/4edbd/bd-devtools-setting.png 175w,/static/4f1328e274d88a5a8c049d1e90d36d21/13ae7/bd-devtools-setting.png 350w,/static/4f1328e274d88a5a8c049d1e90d36d21/ebf47/bd-devtools-setting.png 688w" sizes="(max-width: 688px) 100vw, 688px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></div><div class="paragraph-module--paragraph--4pbAk">Afterwards you can access the dev tools by pressing <span class="code-module--inline--X57bh">Ctrl</span> + <span class="code-module--inline--X57bh">Shift</span> + <span class="code-module--inline--X57bh">I</span> (or <span class="code-module--inline--X57bh">Cmd</span> + <span class="code-module--inline--X57bh">Opt</span> + <span class="code-module--inline--X57bh">I</span> on a Mac).
The dev tools will be <strong>extremely important</strong> for any kind of reverse engineering later on and can be used to experiment in the console.</div><h2 class="heading-module--heading--HLeqp" id="react-dev-tools"><a class="heading-module--link--P5zon" href="/guides/bd/getting-started/#react-dev-tools">#</a>React Dev Tools</h2><div class="paragraph-module--paragraph--4pbAk">React Developer Tools extends the regular dev tools with React specific tabs.
If you have debugged a React application before, you should be familiar with them.
They will be very helpful when working with Discord&#x27;s own React components.</div><div class="paragraph-module--paragraph--4pbAk">In order to use them in Discord, you will need to have a <a href="https://www.google.com/intl/en_us/chrome/" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">Chrome</a> installation on your computer.
Install the <a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi/" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">React Developer Tools extension</a> from the Chrome Web Store.
<em>(As an alternative manually mimicking the folder structure and placing the extension files in there will also suffice.)</em>
Then enable the setting in BetterDiscord&#x27;s developer settings and the dev tools will automatically be loaded in Discord as well.</div><div class="paragraph-module--paragraph--4pbAk"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:unset;margin-right:unset;max-width:690px;margin-top:10px;margin-bottom:10px">
      <a href="/static/e3b8b7ebc174f0252c4bbd47349adcd7/1e043/react-dev-tools.png" class="gatsby-resp-image-link anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:64.57142857142857%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACh0lEQVQ4y1WT6W7TQBSF/RoI1DVxvM54d+wkjtUmcRYKlFIW0QISAgQSqEW0VUUrQCAQIPGPF+BFP2S7KeHHsaXRne+eM3dG8fwY6QR4QRvHDXG9COmGOF6EkD5BlKDpgtUVk5XVda5eW8IwBKbtYpoO3SgmiiKCMEU4AYrwO1hOG1tGWE6M7bQRXoJuB7RMv5Jm+aiGh2YF+HGfjt8hTHJU06NpeFhOUq2X+xXZn+JNdnF6BZabVJs0O6z/C9LtkIbm8PrgiPH1HVpmuRZhiBBD+FWN7SYodtRHZmOsdIAdZmiGVzuz/jmsXQastyRvDt4xLG7j+wPieELYbuOGDqpRN1ZMN0XmU+zeGNEZYoUZuojRLiCLKoGnZx+Zbt3BDXpIr40hgsrtvEYp48lsgugWGG6K5iQYMr50tag1VXL+4Qu3dh6QZkPSbIRwk/9qlfIj0gFmsonXG2H7nYsBhHXsC5WN11qSsw9f6G9MKremjCvI4tEommpjRxlBsc3w5j3Cdo7WEmja/9J1yfqazvn5J/LBjDVVXMK0edPSYaM7Qd28TfH0kMdHH+nff4aabdHozWguSM1mLCcF77/9It+YVG71hdswBytL+yesPjrBf/sD6/AnrRefWN4/ZmlvriOW9o9ZeXTClYfHnP7+Q54Xl8DFW1BFbgY5qp9jju5gX9/DmjzAHmyj9aZo2Qwj38JIR6hBzorscvb5O/nmtBpQCSkfxRxcR+5MaCQFZnEPcfcF3YevCG/sY21uYw12UPtbNLszmp0py/GQ91//Ra4G6qXVcC6BzXRMoz1C39hG7j7Hv/+ScOcpg90n9G7toXXrhmo6ZjkccPr5Rw1U68jqxUOYR/4Lu6WwTaBlxwAAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="React dev tools" title="React dev tools" src="/static/e3b8b7ebc174f0252c4bbd47349adcd7/1e043/react-dev-tools.png" srcSet="/static/e3b8b7ebc174f0252c4bbd47349adcd7/4edbd/react-dev-tools.png 175w,/static/e3b8b7ebc174f0252c4bbd47349adcd7/13ae7/react-dev-tools.png 350w,/static/e3b8b7ebc174f0252c4bbd47349adcd7/1e043/react-dev-tools.png 690w" sizes="(max-width: 690px) 100vw, 690px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></div><h2 class="heading-module--heading--HLeqp" id="better-discord-api"><a class="heading-module--link--P5zon" href="/guides/bd/getting-started/#better-discord-api">#</a>BetterDiscord API</h2><div class="paragraph-module--paragraph--4pbAk"><a href="https://betterdiscord.app" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">BetterDiscord</a>&#x27;s full API will <strong>not</strong> be covered here in details.
You can find additional information on the <a href="https://docs.betterdiscord.app/" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">BetterDiscord documentation</a> (still work in progress).
If you encounter any outdated or unclear parts, you should ask in the <a href="https://discord.gg/0Tmfo5ZbORCRqbAd" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">BetterDiscord server</a>.</div><div class="paragraph-module--paragraph--4pbAk">A basic BetterDiscord plugin could look something like this:</div><div class="codetabs-module--container--ZTiQf"><div class="codetabs-module--tabs--MiW6k"><div class="codetabs-module--item--q2WfT codetabs-module--active--GWpeh">Class</div><div class="codetabs-module--item--q2WfT">Callback</div></div><div class="codetabs-module--content--09Aav code-module--no-margin--dNzos"><div><div class="language-js code-module--codeblock--v9lHR"><div class="prism-code language-js code-module--content--PU5QZ" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">1</span><span class="token comment" style="color:#3a454d">/**</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">2</span><span class="token comment" style="color:#3a454d"> * @name MyPlugin</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">3</span><span class="token comment" style="color:#3a454d"> * @author YourName</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">4</span><span class="token comment" style="color:#3a454d"> * @version 0.1.0</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">5</span><span class="token comment" style="color:#3a454d"> * @description What the plugin does.</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">6</span><span class="token comment" style="color:#3a454d"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">7</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">8</span><span class="token plain global" style="color:#fac863">module</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c595c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">MyPlugin</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">9</span><span class="token plain">    </span><span class="token function" style="color:#79b6f2">constructor</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">meta</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">10</span><span class="token plain">        </span><span class="token comment" style="color:#3a454d">// do something when the plugin is loaded</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">11</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">12</span><span class="token plain">    </span><span class="token function" style="color:#79b6f2">start</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">13</span><span class="token plain">        </span><span class="token comment" style="color:#3a454d">// do something on plugin start</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">14</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">15</span><span class="token plain">    </span><span class="token function" style="color:#79b6f2">stop</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">16</span><span class="token plain">        </span><span class="token comment" style="color:#3a454d">// do something on plugin stop</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">17</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">18</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div></div></div></div><div class="paragraph-module--paragraph--4pbAk">BetterDiscord also provides the <a href="https://docs.betterdiscord.app/plugins/api/bdapi" class="anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--X57bh">BdApi</span></a> global, which has a few very helpful things for plugins.
It handles storing &amp; loading plugin data as well as injecting &amp; removing styles (CSS).</div><div class="paragraph-module--paragraph--4pbAk">The <a href="https://www.npmjs.com/package/react" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">react</a> and <a href="https://www.npmjs.com/package/react-dom" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">react-dom</a> packages are available as
<a href="https://docs.betterdiscord.app/plugins/api/bdapi#react" class="anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--X57bh">BdApi.React</span></a> and <a href="https://docs.betterdiscord.app/plugins/api/bdapi#reactdom" class="anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--X57bh">BdApi.ReactDOM</span></a>.
They are the same instances as the ones used by Discord. Always use these and <strong>do not</strong> bundle your own versions.</div><div class="banner-module--banner--EjDoz banner-module--info--lg4mf"><div class="banner-module--icon--wAOLI">i</div><div class="banner-module--content--02eRd"><div class="paragraph-module--paragraph--4pbAk">When using <a href="https://reactjs.org/docs/introducing-jsx.html" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">JSX</a> in a plugin, it has to be transpiled.</div></div></div><div class="codetabs-module--container--ZTiQf"><div class="codetabs-module--tabs--MiW6k"><div class="codetabs-module--item--q2WfT codetabs-module--active--GWpeh">JSX</div><div class="codetabs-module--item--q2WfT">JS</div></div><div class="codetabs-module--content--09Aav code-module--no-margin--dNzos"><div><div class="language-jsx code-module--codeblock--v9lHR"><div class="prism-code language-jsx code-module--content--PU5QZ" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">1</span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token maybe-class-name">BdApi</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">3</span><span class="token plain"></span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#79b6f2">MyComponent</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">4</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#89ddff">&lt;</span><span class="token tag" style="color:#f07178">div</span><span class="token tag" style="color:#f07178"> </span><span class="token tag attr-name" style="color:#c595c5">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#89ddff">=</span><span class="token tag attr-value punctuation" style="color:#89ddff">&quot;</span><span class="token tag attr-value" style="color:#c3e88d">foo</span><span class="token tag attr-value punctuation" style="color:#89ddff">&quot;</span><span class="token tag punctuation" style="color:#89ddff">&gt;</span><span class="token plain-text"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">5</span><span class="token plain-text">        Hello world!</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">6</span><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#89ddff">&lt;/</span><span class="token tag" style="color:#f07178">div</span><span class="token tag punctuation" style="color:#89ddff">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">7</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div></div></div></div><div class="paragraph-module--paragraph--4pbAk"><span class="code-module--inline--X57bh">ReactDOM</span> will not see much use in actual plugins, since most of the time you are rendering into already existing React element trees.</div><div class="paragraph-module--paragraph--4pbAk">In <span class="code-module--inline--X57bh">BdApi</span> we also find the <a href="https://docs.betterdiscord.app/plugins/api/patcher" class="anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--X57bh">BdApi.Patcher</span></a>, which is used to modify existing functions at runtime.
More details on patching will follow later on.</div><div class="paragraph-module--paragraph--4pbAk">Lastly, <a href="https://docs.betterdiscord.app/plugins/api/webpack" class="anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--X57bh">BdApi.Webpack</span></a> features a few utilities used to search through the webpack export cache.
We will take a closer look at this next.</div><h2 class="heading-module--heading--HLeqp" id="webpack-modules"><a class="heading-module--link--P5zon" href="/guides/bd/getting-started/#webpack-modules">#</a>Webpack modules</h2><div class="paragraph-module--paragraph--4pbAk"><a href="https://webpack.js.org" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">Webpack</a> is a <strong>bundler</strong>, meaning at its core it is a tool to take a collection of JS modules and merge them together into one or multiple big files for production.
A module may import other modules and then expose some exports of its own.
In order to avoid executing the modules multiple times, webpack keeps exports of already executed modules in a cache.</div><div class="paragraph-module--paragraph--4pbAk"><a href="https://docs.betterdiscord.app/plugins/api/webpack" class="anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--X57bh">BdApi.Webpack</span></a> allows us to search through this export cache
in order to find variables, functions, objects or React components internally used by Discord.
<a href="https://docs.betterdiscord.app/plugins/api/webpack#getmodule" class="anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--X57bh">Webpack.getModule(filter, options)</span></a> takes a filter function and searches through the exports of all currently cached modules.</div><div class="paragraph-module--paragraph--4pbAk"><a href="https://docs.betterdiscord.app/plugins/api/filters" class="anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--X57bh">Webpack.Filters</span></a> contains helpers to create commonly used search filter patterns.
The two most used ones are <a href="https://docs.betterdiscord.app/plugins/api/filters#byprops" class="anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--X57bh">Filters.byProps(...props)</span></a>
and <a href="https://docs.betterdiscord.app/plugins/api/filters#bydisplayname" class="anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--X57bh">Filters.byDisplayName(name)</span></a>,
searching by properties of <span class="code-module--inline--X57bh">module.exports</span> and a specific <span class="code-module--inline--X57bh">displayName</span> on the export respectively.</div><div class="paragraph-module--paragraph--4pbAk">When trying to hook into Discord&#x27;s internals, searching for the relevant webpack modules is the first step.
This may involve reading Discord&#x27;s source code, inspecting components through React dev tools, experimenting in the console etc.</div><div class="banner-module--banner--EjDoz banner-module--warn--U-aXh"><div class="banner-module--icon--wAOLI">!</div><div class="banner-module--content--02eRd"><div class="paragraph-module--paragraph--4pbAk">Details in the following examples <strong>are outdated</strong>.
Discord&#x27;s internals are undocumented and can change at any time.</div></div></div><div class="paragraph-module--paragraph--4pbAk">As an example, we will use Discord&#x27;s message component.
Inspecting with React dev tools makes us realize a message consists of multiple components.
One parent component is responsible for rendering child components like the header, the content or accessories like reactions.</div><div class="paragraph-module--paragraph--4pbAk"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:unset;margin-right:unset;max-width:364px;margin-top:10px;margin-bottom:10px">
      <a href="/static/2eb6db5d729737f1027b41cd8b760b83/e45a9/message-components.png" class="gatsby-resp-image-link anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:129.14285714285714%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADS0lEQVRIx62Uy2/jZBTF82/ABqG849hOmqfzftqJncROkybqtNO06WQmI2AkFkg8ZpDYdcWIgQ0IBBILQBpU/sMf+pzHJKFNs2Bx9PlxfXzuPfdeTzCaRCC0PCNyCrmgE2s4qA2HWKZBPN0gU2lRaXTIFpsktSpVvUcsXaLZGfJ4MiOeLhFW0nhCUoIVglLCJVTLbY7MEXFzxJGmk0jrFJpdDGtATe9RrlvUDZtYqkjbHvHs+QtS2QqSIHynMLVQqGaQKxaqOUYxx8RzLRJaG02QtPvkayapQoOK3kNJFmk7Y67nL4hnq4TVDJ73X/7KO/zGe1/8TPzmT8rf3VJ58w/+V7/wwec/Unz9ltqbW0qv/6b87Vvq39+i3PyF/OonUl/9QPLmD7zf/I7nw+4VW7AmSMM5idmXJOZfE738DOl4RtCeEloi7Fy7p683xWtdEDDP1/cef7rOLoLZJhH9BLU5IJQzCGYaeFO1/8CXqrnxvnR9fe/x5Vrswp9rEa7YqM4Vcn+K1DlHrtrLd+0lFnGr+NW1x7/5QDPWL4L5FlHrjNjpRyijOXHrlEjRXMfsfrPCvYR+zSBctVH6Uzf1YNEikG9vffwg4S5pQDOImo+ItcZE8i28WR1v1nBPEbeO3SD17PujuA6XuyjH16iDa8LmGf3pJzhXHyOVu67iBxXepVK2zlBHz1DHz0nZFyT1weEp36dSHT5FHszcegZyLbw7MXsJN9tBBIdKHZTuY9R63zVrn4h7CbeIhTmtMWp/6vbj/0IoJiduPSJSWPaicPkOt++t4VZLZHWixhj1eOo6LqYnal+iDJ6gLBUfpHBVP7k3QR3OFgTDGTF7wuTTl1RH10TL3cNMWbdNzkDunKOcPHVbx1XnXKHZ50gla7vN9qW8IhR1CguV9iUx/cQdQb+o412lebBtNAPJGLl1EwrFCEpFc2v0DiZcBUXEghg8QR3NF4Z0L4j2LpA6i77cHb+DRi9qnqKKnVhz8ImNUzDxFyyCy+1z2KSsU9EJl3uoG+rUuuP+SGyezXjvg6Zoy8LnWq67ymCG7FyhOJeLDSTmW2x18Ww448g42W9KQNMXW9s6Q6508YlURZp5k4BYuMWOm36gsLgOFkz+BZgugNfEt5yCAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Message components" title="Message components" src="/static/2eb6db5d729737f1027b41cd8b760b83/e45a9/message-components.png" srcSet="/static/2eb6db5d729737f1027b41cd8b760b83/4edbd/message-components.png 175w,/static/2eb6db5d729737f1027b41cd8b760b83/13ae7/message-components.png 350w,/static/2eb6db5d729737f1027b41cd8b760b83/e45a9/message-components.png 364w" sizes="(max-width: 364px) 100vw, 364px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></div><div class="paragraph-module--paragraph--4pbAk">You can inspect a components source by clicking on the <span class="code-module--inline--X57bh">&lt;&gt;</span> in React dev tools.
The current props &amp; hooks as well as the component type for the currently selected component can also be accessed in the console via the <span class="code-module--inline--X57bh">$r</span> global.</div><div class="paragraph-module--paragraph--4pbAk"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:unset;margin-right:unset;max-width:206px;margin-top:10px;margin-bottom:10px">
      <a href="/static/23ef94e2793863d698744a1935b52acd/a414c/view-source.png" class="gatsby-resp-image-link anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:36%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABa0lEQVQoz41R20oCURT1MwQFu3gZNTU1tTIki/FWpPPUjSnLprSH6FOiiAhCSoI+RFQmFRP7ggZ1FHHUZ2OFRy0fgnpYrL3WPnvvs9kyam4B/4HOaP+OpzUmaPRWqKl5zOosJKc12EhONlmgNzlgMDv/BJe4hGcthI3wNnZZDkaLEyurflIvGzQaT5/RmqFQ6aBQUVBMUb+zioLLvQ41ZYXZtgzHkhfKaT24+AUsdjdk418NVvDSmzg6OUc0lsDhcXwCQz3299gY2Ogp2OgZ9g844j2lXrDF7AwbmqyLkCs1SD4+47Pfh/AhoNvtQpIkwu12G81mE41GA61WC2JdREfqoFqtEl8URfR6PTwkU8OVjRYX5Eo1rq7vUKvVkU5nUC5XUCgUCXg+j9JbGfl8EZXK+1CXyshkc+D5V2SzOQiCgJvb+5+jDK5kd3pAByPwhRjQgTCJ6UAEvgEHR0w0Q7Q/xJC3vlFsd3nwBRCxKpwp+piWAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="View source" title="View source" src="/static/23ef94e2793863d698744a1935b52acd/a414c/view-source.png" srcSet="/static/23ef94e2793863d698744a1935b52acd/4edbd/view-source.png 175w,/static/23ef94e2793863d698744a1935b52acd/a414c/view-source.png 206w" sizes="(max-width: 206px) 100vw, 206px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></div><div class="paragraph-module--paragraph--4pbAk">Here is a rough overview of the source code of the module containing the parent component:</div><div><div class="language-js code-module--codeblock--v9lHR"><div class="prism-code language-js code-module--content--PU5QZ" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">1</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">e</span><span class="token parameter punctuation" style="color:#89ddff">,</span><span class="token parameter" style="color:#ff8b50"> t</span><span class="token parameter punctuation" style="color:#89ddff">,</span><span class="token parameter" style="color:#ff8b50"> n</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">2</span><span class="token plain">    </span><span class="token string" style="color:#c3e88d">&quot;use strict&quot;</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">3</span><span class="token plain">    </span><span class="token known-class-name class-name" style="color:#fac863">Object</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">defineProperty</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;__esModule&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">4</span><span class="token plain">        </span><span class="token literal-property property" style="color:#79b6f2">value</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">!</span><span class="token number" style="color:#ff8b50">0</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">5</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">6</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">7</span><span class="token plain">    t</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method-variable function-variable method function property-access maybe-class-name" style="color:#79b6f2">ThreadStarterChatMessage</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c595c5">function</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">e</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">8</span><span class="token plain">        </span><span class="token comment" style="color:#3a454d">/* component source... */</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">9</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">10</span><span class="token plain">    t</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c595c5">default</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c595c5">void</span><span class="token plain"> </span><span class="token number" style="color:#ff8b50">0</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">11</span><span class="token plain">    t</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method-variable function-variable method function property-access" style="color:#79b6f2">getElementFromMessageId</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c595c5">function</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">e</span><span class="token parameter punctuation" style="color:#89ddff">,</span><span class="token parameter" style="color:#ff8b50"> t</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">12</span><span class="token plain">        </span><span class="token comment" style="color:#3a454d">/* function source... */</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">13</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">14</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">15</span><span class="token plain">    </span><span class="token keyword" style="color:#c595c5">var</span><span class="token plain"> r</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> o </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token comment" style="color:#3a454d">/* React import */</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token comment" style="color:#3a454d">/* other imports... */</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">16</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">17</span><span class="token plain">    </span><span class="token comment" style="color:#3a454d">/* other not exported functions/components... */</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">18</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">19</span><span class="token plain">    </span><span class="token keyword" style="color:#c595c5">var</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">J</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> o</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">memo</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token keyword" style="color:#c595c5">function</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">e</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token comment" style="color:#3a454d">// OUR COMPONENT</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">20</span><span class="token plain">        </span><span class="token comment" style="color:#3a454d">/* component source... */</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">21</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">22</span><span class="token plain">    t</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c595c5">default</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">J</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">23</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span></div></div></div></div><div class="paragraph-module--paragraph--4pbAk">Our component is the anonymous function component inside of the <span class="code-module--inline--X57bh">o.memo()</span> call.
As we can see, it is wrapped inside of a <a href="https://reactjs.org/docs/react-api.html#reactmemo" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">React memo</a> and then exported as default export from its module.
The module also has two other named exports: a <span class="code-module--inline--X57bh">ThreadStarterChatMessage</span> component and a <span class="code-module--inline--X57bh">getElementFromMessageId()</span> function.</div><div class="paragraph-module--paragraph--4pbAk">Knowing this, we can now formulate a predicate to find the module&#x27;s exports in webpack&#x27;s cache using <span class="code-module--inline--X57bh">BdApi</span>.
We want a module whose exports have a <span class="code-module--inline--X57bh">default</span>, <span class="code-module--inline--X57bh">ThreadStarterChatMessage</span> and <span class="code-module--inline--X57bh">getElementFromMessageId</span> entry.</div><div><div class="language-js code-module--codeblock--v9lHR"><div class="prism-code language-js code-module--content--PU5QZ" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">1</span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">exports</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> exports</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c595c5">default</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">&amp;&amp;</span><span class="token plain"> exports</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access maybe-class-name">ThreadStarterChatMessage</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">&amp;&amp;</span><span class="token plain"> exports</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">getElementFromMessageId</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div></div><div class="paragraph-module--paragraph--4pbAk">This type of predicate is exactly what <a href="https://docs.betterdiscord.app/plugins/api/filters#byprops" class="anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--X57bh">Filters.byProps(...props)</span></a> can be used for:
it searches for a module with the passed string arguments as properties/keys.
An equivalent version would look like:</div><div><div class="language-js code-module--codeblock--v9lHR"><div class="prism-code language-js code-module--content--PU5QZ" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">1</span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token maybe-class-name">Message</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token maybe-class-name">Filters</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">byProps</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;default&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;ThreadStarterChatMessage&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;getElementFromMessageId&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div></div><div class="paragraph-module--paragraph--4pbAk">When formulating predicates you have to consider how specific it should be.
When being very specific you are unlikely to accidentally find a different module that also matches the predicate.
However, a very specific predicate may also break very fast when Discord changes something in their internals.</div><div class="paragraph-module--paragraph--4pbAk">Feel free to explore Discord&#x27;s modules using the <span class="code-module--inline--X57bh">BdApi</span> and the dev tools.
You do not always have to start with the UI layer and then navigate through source code until you find what you were looking for.
Sometimes taking a shot in the dark with your searches can help finding the right module as well.
For example, we could do a generic search for all modules exporting something with <span class="code-module--inline--X57bh">&quot;friend&quot;</span> in the key:</div><div><div class="language-js code-module--codeblock--v9lHR"><div class="prism-code language-js code-module--content--PU5QZ" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">1</span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">2</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">exports</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:#fac863">Object</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">keys</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">exports</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">some</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">key</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> key</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">toLowerCase</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">includes</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;friend&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">3</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token literal-property property" style="color:#79b6f2">first</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">4</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">)</span></div></div></div></div><div class="paragraph-module--paragraph--4pbAk">This example will <strong>not</strong> work if what we are looking for is not directly exported from the module as either a key of the default export or a named export.
For example the relationships store will not be included in the output since it is a class instance
and the <span class="code-module--inline--X57bh">isFriend()</span> method is defined on its <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Object_prototypes" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">prototype</a>.
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" class="anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--X57bh">Object.keys()</span></a> simply will not include the method.
If we know we are looking for a store instance, we could search through the keys of the prototype instead:</div><div><div class="language-js code-module--codeblock--v9lHR"><div class="prism-code language-js code-module--content--PU5QZ" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">1</span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">2</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">exports</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:#fac863">Object</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">keys</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token known-class-name class-name" style="color:#fac863">Object</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">getPrototypeOf</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">exports</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">some</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">key</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> key</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">toLowerCase</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">includes</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;friend&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">3</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token literal-property property" style="color:#79b6f2">first</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">4</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">)</span></div></div></div></div><h2 class="heading-module--heading--HLeqp" id="patching"><a class="heading-module--link--P5zon" href="/guides/bd/getting-started/#patching">#</a>Patching</h2><div class="paragraph-module--paragraph--4pbAk">With the module found, we can now hook into the component.
This is done using the already mentioned <a href="https://docs.betterdiscord.app/plugins/api/patcher" class="anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--X57bh">BdApi.Patcher</span></a>.
It allows us to change the behaviour of existing functions at runtime, executing our own code before, after or instead of the original.
This is commonly referred to as <em>&quot;monkey patching&quot;</em> or simply <em>&quot;patching&quot;</em>.</div><div class="paragraph-module--paragraph--4pbAk">There is three different kinds of patches the <span class="code-module--inline--X57bh">BdApi.Patcher</span> offers.
Typically, you will use <span class="code-module--inline--X57bh">before</span> patches when you want to intercept and manipulate the incoming function arguments,
<span class="code-module--inline--X57bh">after</span> patches when you want to intercept and manipulate the resulting return value
and <span class="code-module--inline--X57bh">instead</span> patches when the behaviour should be changed completely or for other complex scenarios.</div><div class="paragraph-module--paragraph--4pbAk">In React components you typically want to modify the return value of the original in order to change the elements rendered.
This means we want to create an <span class="code-module--inline--X57bh">after</span> patch.
For class components the target function is <span class="code-module--inline--X57bh">Component.prototype.render()</span> usually.
For function components it is the component itself.</div><div class="paragraph-module--paragraph--4pbAk">Remember: in our case we have a function component is wrapped inside a <a href="https://reactjs.org/docs/react-api.html#reactmemo" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">React memo</a>.
A memo stores the wrapped component in its <span class="code-module--inline--X57bh">type</span> property.
We will simply leave the memo as it is and patch its <span class="code-module--inline--X57bh">type</span> to hook into the contained function component.</div><div><div class="language-js code-module--codeblock--v9lHR"><div class="prism-code language-js code-module--content--PU5QZ" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">1</span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token maybe-class-name">Message</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token maybe-class-name">Filters</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">byProps</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;default&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;ThreadStarterChatMessage&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;getElementFromMessageId&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">3</span><span class="token plain"></span><span class="token maybe-class-name">Patcher</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">after</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;MyPluginName&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token maybe-class-name">Message</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c595c5">default</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;type&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">thisObject</span><span class="token parameter punctuation" style="color:#89ddff">,</span><span class="token parameter" style="color:#ff8b50"> arguments</span><span class="token parameter punctuation" style="color:#89ddff">,</span><span class="token parameter" style="color:#ff8b50"> returnValue</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">4</span><span class="token plain">    </span><span class="token console class-name" style="color:#fac863">console</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;Original function received arguments:&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> arguments</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">5</span><span class="token plain">    </span><span class="token console class-name" style="color:#fac863">console</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;Original function returned value:&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> returnValue</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">6</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div></div><div class="paragraph-module--paragraph--4pbAk">After the component has been patched, we still need to trigger a rerender.
In this case swapping channels will take care of it for us.
We should see output being logged into the console for each message that renders onscreen.</div><div class="paragraph-module--paragraph--4pbAk"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:unset;margin-right:unset;max-width:700px;margin-top:10px;margin-bottom:10px">
      <a href="/static/9330ecfc8056cb2d3468fd489ee324e2/d48f1/console-output.png" class="gatsby-resp-image-link anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:22.285714285714285%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAwElEQVQY0zWPWXLDMAxDfZemE2ujFkq05MRt738pZEhPPzDkB/EIbCFmHPNEY0FtA8yCPiZKZZvCDCZCjRGNCD4Q1JMLg3IzJapwLuLr8cTmfMKQiVyaSUGNBxIVMxUiUIhIPiCFiN1FOB8NGsL9QPXc/Q1U+vXzBzkWRBaO+cL5uiyx7qt3SC0YmTBKRkwFRBW1dZR6S4Mo9PG9Y9OD9/WLIQtDKx4n5npbStuZDdQpoedsydSjTbTBf3UfkiX8AMAVfTSw7ldDAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Console output" title="Console output" src="/static/9330ecfc8056cb2d3468fd489ee324e2/8c557/console-output.png" srcSet="/static/9330ecfc8056cb2d3468fd489ee324e2/4edbd/console-output.png 175w,/static/9330ecfc8056cb2d3468fd489ee324e2/13ae7/console-output.png 350w,/static/9330ecfc8056cb2d3468fd489ee324e2/8c557/console-output.png 700w,/static/9330ecfc8056cb2d3468fd489ee324e2/d48f1/console-output.png 796w" sizes="(max-width: 700px) 100vw, 700px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span></div><div class="paragraph-module--paragraph--4pbAk">The first argument received is the component props just as you would expect with a function component.
In the case of the message component those consist of the corresponding channel object, message object and some other information.
The second argument is an empty object since the component does not forward any refs (or makes use of React&#x27;s legacy context API).</div><div class="paragraph-module--paragraph--4pbAk">As to be expected, the return value is what a call to <a href="https://reactjs.org/docs/react-api.html#createelement" class="anchor-module--anchor--MiJ6w" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--X57bh">React.createElement()</span></a> returns - a tree of React element nodes.
The most interesting properties on these nodes are <span class="code-module--inline--X57bh">type</span>, which indicates what kind of element or component this tree node is,
and <span class="code-module--inline--X57bh">props</span>, which is the props passed to the HTML element or React component.
Child nodes are found under <span class="code-module--inline--X57bh">props.children</span>.</div><div class="paragraph-module--paragraph--4pbAk">If we want to render our own elements somewhere, we have to find the node we want to append them to.
This can be done by using tree/graph traversal algorithms like <a href="https://en.wikipedia.org/wiki/Depth-first_search" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">DFS</a> or <a href="https://en.wikipedia.org/wiki/Breadth-first_search" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">BFS</a>.
You can find examples of utility functions for tree traversal in <a href="https://github.com/rauenzi/BDPluginLibrary/blob/master/src/modules/utilities.js#L122-L165" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">Zere&#x27;s Plugin Library</a> (DFS)
or <a href="https://github.com/Zerthox/BetterDiscord-Plugins/blob/master/dium/src/utils/react.ts#L6-L29" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">my own plugin repo</a> (BFS).</div><div class="paragraph-module--paragraph--4pbAk">Assuming we have a <span class="code-module--inline--X57bh">findNodeInTree(tree, predicate)</span> utility function to search the tree for a specific node, appending new elements could look like this:</div><div class="codetabs-module--container--ZTiQf"><div class="codetabs-module--tabs--MiW6k"><div class="codetabs-module--item--q2WfT codetabs-module--active--GWpeh">JSX</div><div class="codetabs-module--item--q2WfT">JS</div></div><div class="codetabs-module--content--09Aav code-module--no-margin--dNzos"><div><div class="language-jsx code-module--codeblock--v9lHR"><div class="prism-code language-jsx code-module--content--PU5QZ" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">1</span><span class="token maybe-class-name">Patcher</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">after</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;MyPluginName&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token maybe-class-name">Message</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token keyword module" style="color:#c595c5">default</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;type&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">thisObject</span><span class="token parameter punctuation" style="color:#89ddff">,</span><span class="token parameter" style="color:#ff8b50"> </span><span class="token parameter punctuation" style="color:#89ddff">[</span><span class="token parameter" style="color:#ff8b50">props</span><span class="token parameter punctuation" style="color:#89ddff">]</span><span class="token parameter punctuation" style="color:#89ddff">,</span><span class="token parameter" style="color:#ff8b50"> returnValue</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">2</span><span class="token plain">    </span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> foundNode </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">findNodeInTree</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">returnValue</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">node</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> node</span><span class="token operator" style="color:#89ddff">?.</span><span class="token plain">type </span><span class="token operator" style="color:#89ddff">===</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;li&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">3</span><span class="token plain">    </span><span class="token keyword control-flow" style="color:#c595c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">foundNode</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">4</span><span class="token plain">        foundNode</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">children</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">[</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">5</span><span class="token plain">            foundNode</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">props</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">children</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">6</span><span class="token plain">            </span><span class="token tag punctuation" style="color:#89ddff">&lt;</span><span class="token tag" style="color:#f07178">div</span><span class="token tag punctuation" style="color:#89ddff">&gt;</span><span class="token plain-text"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">7</span><span class="token plain-text">                </span><span class="token tag punctuation" style="color:#89ddff">&lt;</span><span class="token tag" style="color:#f07178">span</span><span class="token tag punctuation" style="color:#89ddff">&gt;</span><span class="token plain-text">This channel is</span><span class="token tag punctuation" style="color:#89ddff">&lt;/</span><span class="token tag" style="color:#f07178">span</span><span class="token tag punctuation" style="color:#89ddff">&gt;</span><span class="token plain-text"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">8</span><span class="token plain-text">                </span><span class="token tag punctuation" style="color:#89ddff">&lt;</span><span class="token tag" style="color:#f07178">span</span><span class="token tag punctuation" style="color:#89ddff">&gt;</span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain">props</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">channel</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">isPrivate</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">?</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;private&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;not private&quot;</span><span class="token punctuation" style="color:#89ddff">}</span><span class="token tag punctuation" style="color:#89ddff">&lt;/</span><span class="token tag" style="color:#f07178">span</span><span class="token tag punctuation" style="color:#89ddff">&gt;</span><span class="token plain-text"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">9</span><span class="token plain-text">            </span><span class="token tag punctuation" style="color:#89ddff">&lt;/</span><span class="token tag" style="color:#f07178">div</span><span class="token tag punctuation" style="color:#89ddff">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">10</span><span class="token plain">        </span><span class="token punctuation" style="color:#89ddff">]</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">11</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#c595c5">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">12</span><span class="token plain">        </span><span class="token console class-name" style="color:#fac863">console</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">error</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;node was not found&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">13</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">14</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div></div></div></div><div class="paragraph-module--paragraph--4pbAk">Remember to undo the patches you did in <span class="code-module--inline--X57bh">start()</span> when your plugin is stopped:</div><div><div class="language-js code-module--codeblock--v9lHR"><div class="prism-code language-js code-module--content--PU5QZ" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">1</span><span class="token function" style="color:#79b6f2">stop</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">2</span><span class="token plain">    </span><span class="token maybe-class-name">Patcher</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">unpatchAll</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;MyPluginName&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--ixRWU">3</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span></div></div></div></div><h2 class="heading-module--heading--HLeqp" id="further-information"><a class="heading-module--link--P5zon" href="/guides/bd/getting-started/#further-information">#</a>Further information</h2><div class="paragraph-module--paragraph--4pbAk">Hopefully this helped you a bit while getting started with developing BetterDiscord plugins and using Discord&#x27;s internals.
Make sure to check the <a href="https://docs.betterdiscord.app/" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">BetterDiscord documentation</a> for information.
Reading the source code of other plugins can also help a lot when learning.
<em>(Maybe not plugins using <span class="code-module--inline--X57bh">BDFDB</span> by DevilBro as they can be difficult to read.)</em></div><div class="paragraph-module--paragraph--4pbAk">React&#x27;s internals and the React fiber have not been touched here at all, but may be interesting for plugin development in some cases.
Same thing goes for Discord&#x27;s internal state management system using event dispatching and Flux.</div><div class="paragraph-module--paragraph--4pbAk">If you have any questions, the <span class="code-module--inline--X57bh">#programming</span> channel in the <a href="https://discord.gg/0Tmfo5ZbORCRqbAd" class="anchor-module--anchor--MiJ6w anchor-module--text--8rtuh" target="_blank" rel="noopener noreferrer">BetterDiscord server</a> is the place to ask.</div></div></div><div class="footer-module--footer--0VXg2"><div class="footer-module--left--1jkDK">Copyright 2021 Zerthox</div><div class="footer-module--right--gwNjW"><a href="https://github.com/zerthox" class="footer-module--link--BrQFQ" target="_blank" rel="noopener noreferrer">GitHub</a> | <a href="https://github.com/zerthox/zerthox.github.io" class="footer-module--link--BrQFQ" target="_blank" rel="noopener noreferrer">Source</a></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/guides/bd/getting-started/";window.___webpackCompilationHash="2569f8fe1b643ed4a1ae";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-5c1bdc2b821168968276.js"],"app":["/app-1d34392b205857794382.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-3a4ed80d4c24f94c0e03.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-0077bac5f4771eab2ab9.js"],"component---src-pages-about-mdx":["/component---src-pages-about-mdx-543071cf7894b1fc5536.js"],"component---src-pages-drafts-bd-reverse-engineering-index-mdx":["/component---src-pages-drafts-bd-reverse-engineering-index-mdx-cc00ab3f562ff441061c.js"],"component---src-pages-guides-bd-flux-index-mdx":["/component---src-pages-guides-bd-flux-index-mdx-0139ac27f185134fb721.js"],"component---src-pages-guides-bd-getting-started-index-mdx":["/component---src-pages-guides-bd-getting-started-index-mdx-d545149d5597f0c1f0d0.js"],"component---src-pages-guides-index-tsx":["/component---src-pages-guides-index-tsx-950126f8f119a6ae7221.js"],"component---src-pages-index-mdx":["/component---src-pages-index-mdx-aaaebd0e2af74bbf85b8.js"]};/*]]>*/</script><script src="/polyfill-5c1bdc2b821168968276.js" nomodule=""></script><script src="/app-1d34392b205857794382.js" async=""></script><script src="/framework-7c0d5fbdbdf211c99d11.js" async=""></script><script src="/webpack-runtime-4b6fc75d087e93776a33.js" async=""></script></body></html>