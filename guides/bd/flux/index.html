<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.5.0"/><meta name="description" content="State management in React When working with React, the UI has a state, which determines the elements rendered onscreen. Changing said state…" data-gatsby-head="true"/><meta property="og:title" content="Flux and Discord - Zerthox" data-gatsby-head="true"/><meta property="og:description" content="State management in React When working with React, the UI has a state, which determines the elements rendered onscreen. Changing said state…" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta name="twitter:card" content="summary" data-gatsby-head="true"/><meta name="twitter:creator" content="Zerthox" data-gatsby-head="true"/><meta name="twitter:title" content="Flux and Discord - Zerthox" data-gatsby-head="true"/><meta name="twitter:description" content="State management in React When working with React, the UI has a state, which determines the elements rendered onscreen. Changing said state…" data-gatsby-head="true"/><style data-href="/styles.2b7dae0f3b363d795639.css" data-identity="gatsby-global-css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}body{background:#0f1010;color:hsla(0,0%,100%,.7);font-family:sans-serif;line-height:1.5}.center-module--container--d71dc{align-items:center;display:flex;flex-direction:column;margin-bottom:20px;margin-top:10%}.avatar-module--avatar--9b73c{background-size:100%;border-radius:50%}.user-module--container--b30bb{align-items:center;color:hsla(0,0%,100%,.7);display:flex;flex-direction:row;padding:0 5px;text-decoration:none}.user-module--container--b30bb:hover .user-module--name--d5384{color:#fff}.user-module--container--b30bb:hover .user-module--avatar--3d0a3{opacity:1}.user-module--name--d5384{margin-left:5px}.user-module--avatar--3d0a3{opacity:.7}.header-module--header--a0daf{background-color:#242628;padding:5px 10%;-webkit-user-select:none;user-select:none;z-index:1}.header-module--header--a0daf,.header-module--title--78ab6{align-items:center;display:flex;flex-direction:row;justify-content:center}.header-module--title--78ab6{color:#fff;font-size:30px;font-weight:600;padding:0 30px;text-decoration:none}.header-module--name--70fa5{margin-left:10px}.header-module--bar--d4a44{align-items:center;display:flex;flex-direction:row;flex-grow:1;max-width:800px}.header-module--item--e3e25{border-radius:3px;color:#fff;margin:0 10px;padding:3px 10px;text-decoration:none;transition:all .15s ease-in-out}.header-module--item--e3e25.header-module--active--583af,.header-module--item--e3e25:hover{background-color:rgba(0,0,0,.3)}.footer-module--footer--d155e{background-color:#242628;display:flex;font-size:13px;padding:5px 20px;-webkit-user-select:none;user-select:none}.footer-module--left--d6390{margin-right:auto}.footer-module--right--83036{margin-left:auto}.footer-module--link--06b40{color:hsla(0,0%,100%,.7);text-decoration:none;transition:all .15s ease-in-out}.footer-module--link--06b40:hover{color:#fff}.layout-module--main--3f0fd{display:grid;grid-template-columns:auto;grid-template-rows:auto 1fr auto;height:100vh;justify-content:stretch;min-width:700px}.layout-module--body--a3b83{align-items:center;background-color:#0f1010;display:flex;flex-direction:column;padding:20px 10%}.layout-module--title--c05ab{align-items:center;display:flex;flex-direction:column;margin-bottom:20px}.layout-module--heading--dd2ea{color:#fff;font-size:40px;text-align:center;text-shadow:0 0 20px hsla(0,0%,100%,.1)}.layout-module--info--8110f{align-items:center;display:flex;flex-direction:row}.layout-module--author--34e41{color:hsla(0,0%,100%,.7);display:flex;flex-direction:row;font-size:20px}.layout-module--date--211e7{color:hsla(0,0%,100%,.3);font-size:14px;margin-left:10px}.layout-module--updated--8118a{font-style:italic}.layout-module--separator--3ea5b{font-size:1.2em;margin:0 1ch}.layout-module--content--ba793{background-color:#242628;border-radius:3px;margin:0 10px;max-width:1000px;padding:30px 60px 40px}.title-module--title--87401{color:#fff;font-size:75px;text-shadow:0 0 20px hsla(0,0%,100%,.3)}.title-module--subtitle--ec44c{color:hsla(0,0%,100%,.7);font-size:30px}._404-module--link--35fd2{color:hsla(0,0%,100%,.7);cursor:pointer;font-size:18px;margin-top:15px;text-decoration:none;transition:all .15s ease-in-out}._404-module--link--35fd2:not(._404-module--disabled--f20a3):hover{color:#fff}._404-module--link--35fd2._404-module--disabled--f20a3{cursor:default;opacity:.3}.anchor-module--anchor--32227{color:hsla(0,0%,100%,.7);cursor:pointer;text-decoration:none;transition:all .15s ease-in-out}.anchor-module--anchor--32227:hover{color:#fff}.anchor-module--anchor--32227.anchor-module--text--f2bb6{background-color:hsla(0,0%,100%,.07);border-bottom:1px solid hsla(0,0%,100%,.2);padding:1px 2px}.anchor-module--anchor--32227.anchor-module--text--f2bb6:hover{background-color:hsla(0,0%,100%,.2);border-color:#fff}.paragraph-module--paragraph--e296c{margin:5px 0;text-align:justify}.paragraph-module--paragraph--e296c img{max-width:100%}.heading-module--heading--1cb7a{margin:1.5em 0 .5em -2px;padding-left:2px;position:relative}.heading-module--heading--1cb7a:hover .heading-module--link--3f9ce{opacity:.5}.heading-module--heading--1cb7a:hover .heading-module--link--3f9ce:hover{opacity:1}.heading-module--link--3f9ce{color:#fff;cursor:pointer;opacity:0;padding:0 3px;position:absolute;right:100%;text-decoration:none;transition:all .15s ease-in-out;-webkit-user-select:none;user-select:none}.code-module--codeblock--bfd94,.code-module--inline--5f9ed{font-family:source-code-pro,Menlo,Monaco,Consolas,Liberation Mono,Courier New,Courier,monospace}.code-module--codeblock--bfd94{background:#0f1010;border-radius:5px;display:block;font-size:14px;margin:10px 0;overflow-x:auto;padding:5px 10px 5px 4ch;position:relative;tab-size:4}.code-module--no-margin--74dce .code-module--codeblock--bfd94{margin:0}.code-module--content--3d4e5{white-space:pre}.code-module--number--8b145{color:#3a454d;margin-left:-4ch;position:absolute;text-align:right;-webkit-user-select:none;user-select:none;width:3ch}.code-module--line--2bfd9{margin-left:4ch}.code-module--inline--5f9ed{background:#1a1b1e;border-radius:3px;font-size:14px;padding:1px 3px}.list-module--list--48ac1{display:flex;flex-direction:column}.list-module--item--2ff2e{border-radius:3px;display:flex;padding:20px 60px;position:relative}.list-module--item--2ff2e:hover{background:#303236}.list-module--link--a777c{color:hsla(0,0%,100%,.7);cursor:pointer;display:flex;flex-direction:column;flex-grow:1;text-decoration:none;transition:all .15s ease-in-out}.list-module--title--83b07{align-items:center;display:flex;flex-direction:row}.list-module--name--27e7d{font-size:18px;font-weight:600}.list-module--date--f1eea{color:hsla(0,0%,100%,.3);margin-left:10px}.list-module--description--64b4a{font-size:14px;max-width:600px}.list-module--author--82ff7{align-items:center;cursor:default;display:flex;flex-direction:row;flex-grow:1;margin-left:1ch}.banner-module--banner--1230e{align-items:center;display:flex;flex-direction:row;margin:20px -20px;padding:10px}.banner-module--banner--1230e.banner-module--info--960e2{background-color:#364563}.banner-module--banner--1230e.banner-module--info--960e2 .banner-module--icon--c0038{background-color:#5973a6}.banner-module--banner--1230e.banner-module--warn--53f69{background-color:#c76605}.banner-module--banner--1230e.banner-module--warn--53f69 .banner-module--icon--c0038{background-color:#fa9938}.banner-module--icon--c0038{font-weight:700;margin:5px;padding:5px 10px}.banner-module--content--d3679{margin:0 10px}.banner-module--content--d3679.banner-module--bold--a3e29{font-weight:600}.codetabs-module--container--65389{display:flex;flex-direction:column}.codetabs-module--tabs--3225b{display:flex;flex-direction:row;margin-left:5px}.codetabs-module--item--ab659{border-radius:3px 3px 0 0;color:hsla(0,0%,100%,.7);cursor:pointer;margin:0 5px;padding:5px 15px;transition:all .15s ease-in-out}.codetabs-module--item--ab659:hover{background:rgba(15,16,16,.5);color:#fff}.codetabs-module--item--ab659.codetabs-module--active--196a5{background:#0f1010}.codetabs-module--content--d3d01>*{margin:0}</style><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><link rel="icon" href="/favicon-32x32.png?v=9298de8c14fc98a854bd9ec5a9e9d15c" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=9298de8c14fc98a854bd9ec5a9e9d15c"/><title data-gatsby-head="true">Flux and Discord - Zerthox</title></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout-module--main--3f0fd"><div class="header-module--header--a0daf"><a class="header-module--title--78ab6" href="/"><div class="avatar-module--avatar--9b73c" style="background-image:url(https://avatars.githubusercontent.com/zerthox);width:40px;height:40px"></div><span class="header-module--name--70fa5">Zerthox</span></a><div class="header-module--bar--d4a44"><a class="header-module--item--e3e25" href="/">Home</a><a class="header-module--item--e3e25 header-module--active--583af" href="/guides/">Guides</a></div></div><div class="layout-module--body--a3b83"><div class="layout-module--title--c05ab"><div class="layout-module--heading--dd2ea">Flux and Discord</div><div class="layout-module--info--8110f"><div class="layout-module--author--34e41">by <a href="https://github.com/zerthox" class="user-module--container--b30bb" target="_blank" rel="noopener noreferrer"><div class="user-module--avatar--3d0a3 avatar-module--avatar--9b73c" style="background-image:url(https://avatars.githubusercontent.com/zerthox);width:30px;height:30px"></div><div class="user-module--name--d5384">Zerthox</div></a></div><div class="layout-module--date--211e7">14 May 2022<span class="layout-module--updated--8118a"> (Updated: <!-- -->07 December 2022<!-- -->)</span><span class="layout-module--separator--3ea5b">|</span><span>5<!-- -->min read</span></div></div></div><div class="layout-module--content--ba793"><h2 class="heading-module--heading--1cb7a" id="state-management-in-react"><a class="heading-module--link--3f9ce" href="/guides/bd/flux/#state-management-in-react">#</a>State management in React</h2>
<div class="paragraph-module--paragraph--e296c">When working with <a href="https://reactjs.org" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">React</a>, the UI has a state, which determines the elements rendered onscreen.
Changing said state will cause React to rerender the affected UI components.
React itself already comes with some tools to manage state:
the <a href="https://reactjs.org/docs/faq-state.html" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">State API</a>,
which can be used via the <a href="https://reactjs.org/docs/react-component.html#setstate" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">this.setState()</span></a> method in class components
and via the newer <a href="https://reactjs.org/docs/hooks-reference.html#usestate" class="anchor-module--anchor--32227" target="_blank" rel="noopener noreferrer"><span class="code-module--inline--5f9ed">useState()</span></a> hook in function components.
For managing global state React also features a lesser known <a href="https://reactjs.org/docs/context.html" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Context API</a> out of the box.</div>
<div class="paragraph-module--paragraph--e296c">However, in large applications state management can prove more difficult or inefficient.
That&#x27;s what resulted in the <a href="https://facebook.github.io/flux/" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Flux</a> architecture for managing data flow and application state in React.
While the original Flux project by Facebook themselves is no longer actively developed, the architecture has proven useful.
Popular state management libraries of today like <a href="https://redux.js.org/" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">Redux</a> are built upon it.</div>
<div class="paragraph-module--paragraph--e296c"><img src="https://facebook.github.io/flux/img/overview/flux-simple-f8-diagram-with-client-action-1300w.png" alt="Flux architecture"/>
<em>Source: Facebook&#x27;s Flux Docs</em></div>
<div class="paragraph-module--paragraph--e296c">The Flux pattern traditionally consists of central <strong>Dispatcher</strong>(s), which can receive so-called Actions.
An <strong>Action</strong> represents a modification of the application&#x27;s state and has an identifying type (kind) as well as a potential payload of additional data.
Actions may also be viewed as events, which happen within the application.
The dispatcher is responsible for forwarding the received data to the relevant <strong>Stores</strong>.
Each store is used to store state information relevant to a specific part of the application.
This allows to separate for example which application language the user has selected from which chatroom they are currently viewing.</div>
<div class="paragraph-module--paragraph--e296c">You can read more about the architecture in the <a href="https://facebook.github.io/flux/docs/in-depth-overview/" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">In-Depth Overview</a> within the Flux Docs.</div>
<div class="paragraph-module--paragraph--e296c">The store data as well as the ability to dispatch actions now has to be made available for UI components.
For the classic class-based components, this used to be typically done with wrapper components,
which take care of updating and give the inner component access to store data via props or custom methods.
This API is sometimes also referred to as &quot;Connect&quot; since the name of the function used to wrap a component usually includes the word connect.
The alternative API for function component would be realized via the newer concept of <a href="https://reactjs.org/docs/hooks-intro.html" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">hooks</a>.</div>
<div class="banner-module--banner--1230e banner-module--info--960e2"><div class="banner-module--icon--c0038">i</div><div class="banner-module--content--d3679"><div class="paragraph-module--paragraph--e296c">The React community has been moving more and more towards <strong>function components and hooks</strong>.
They make it easy to use data within a component and have it update automatically.
Libraries like <a href="https://react-redux.js.org/" class="anchor-module--anchor--32227 anchor-module--text--f2bb6" target="_blank" rel="noopener noreferrer">React Redux</a> are now recommending usage of their hooks API over older class component APIs.</div></div></div>
<h2 class="heading-module--heading--1cb7a" id="discords-flux-implementation"><a class="heading-module--link--3f9ce" href="/guides/bd/flux/#discords-flux-implementation">#</a>Discord&#x27;s Flux implementation</h2>
<div class="paragraph-module--paragraph--e296c">Discord uses a (as far as we know) custom implementation of the Flux architecture.
It forms a large part of the data layer behind the UI layer.</div>
<div class="banner-module--banner--1230e banner-module--warn--53f69"><div class="banner-module--icon--c0038">!</div><div class="banner-module--content--d3679 banner-module--bold--a3e29">Named exports have been mangled, which also affects the hooks mentioned below.</div></div>
<div class="paragraph-module--paragraph--e296c">Their implementation has both a newer hooks API they are transitioning to as well as an old connect API, which is still used in parts of the codebase.
Both APIs require the relevant stores in an array and a callback which computes the data and is invoked whenever a change has been detected.
All hooks also take an optional dependency array.
In the case of <span class="code-module--inline--5f9ed">useStateFromStores()</span> a comparator function can be passed as 4th argument to customize update behaviour.
The <span class="code-module--inline--5f9ed">useStateFromStoresArray()</span> and <span class="code-module--inline--5f9ed">useStateFromStoresObject()</span> hooks come with a predefined comparator for arrays and objects respectively.</div>
<div class="codetabs-module--container--65389"><div class="codetabs-module--tabs--3225b"><div class="codetabs-module--item--ab659 codetabs-module--active--196a5">Hooks</div><div class="codetabs-module--item--ab659">Connect</div></div><div class="codetabs-module--content--d3d01 code-module--no-margin--74dce"><div class="code-module--codeblock--bfd94"><div class="prism-code language-jsx code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#79b6f2">MyComponent</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">2</span><span class="token plain">    </span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> currentUser </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">useStateFromStores</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">[</span><span class="token maybe-class-name">UserStore</span><span class="token punctuation" style="color:#89ddff">]</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">UserStore</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">getCurrentUser</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">4</span><span class="token plain">    </span><span class="token keyword control-flow" style="color:#c595c5">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">5</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#89ddff">&lt;</span><span class="token tag" style="color:#f07178">div</span><span class="token tag punctuation" style="color:#89ddff">&gt;</span><span class="token plain-text">Current user is: </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain">currentUser</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token property-access">username</span><span class="token punctuation" style="color:#89ddff">}</span><span class="token tag punctuation" style="color:#89ddff">&lt;/</span><span class="token tag" style="color:#f07178">div</span><span class="token tag punctuation" style="color:#89ddff">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">6</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">7</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div></div></div>
<div class="paragraph-module--paragraph--e296c">Their stores as well as their central dispatcher also allow for listeners, which are notified of any incoming actions/events.
This can be useful when you want to use store updates somewhere outside of the UI layer.</div>
<div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#79b6f2">listener</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">action</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token console class-name" style="color:#fac863">console</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;Dispatcher received:&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> action</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">3</span><span class="token plain"></span><span class="token maybe-class-name">Dispatcher</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">subscribe</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;ACTION_TYPE&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> listener</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">5</span><span class="token plain"></span><span class="token maybe-class-name">Dispachter</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">unsubscribe</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;ACTION_TYPE&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> listener</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div>
<div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#79b6f2">listener</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token console class-name" style="color:#fac863">console</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;UserStore was updated&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">3</span><span class="token plain"></span><span class="token maybe-class-name">UserStore</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">addChangeListener</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">listener</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">5</span><span class="token plain"></span><span class="token maybe-class-name">UserStore</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">removeChangeListener</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain">listener</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div>
<div class="paragraph-module--paragraph--e296c">Besides using the intended functions for dispatching specific actions, actions can also be dispatched directly on the dispatcher using <span class="code-module--inline--5f9ed">Dispatcher.dispatch()</span>.</div>
<div class="paragraph-module--paragraph--e296c">There is a massive amount of different actions.
In May 2022 nearly 1500 entries were listed within Discord&#x27;s internal <span class="code-module--inline--5f9ed">ActionType</span> TypeScript enum.
The enum has since been removed (most likely turned into a <span class="code-module--inline--5f9ed">const enum</span>) in August 2022.</div>
<h2 class="heading-module--heading--1cb7a" id="finding-stores"><a class="heading-module--link--3f9ce" href="/guides/bd/flux/#finding-stores">#</a>Finding Stores</h2>
<div class="paragraph-module--paragraph--e296c">As with all other internals, stores need to be found within the webpack exports cache and have to be reverse engineered.
You can find more information in my <a class="anchor-module--anchor--32227 anchor-module--text--f2bb6" href="/guides/bd/getting-started/">Getting started with BetterDiscord Plugin development</a> guide.
In 2022 Discord added a <span class="code-module--inline--5f9ed">getName()</span> method to their store class.
The name is also present as <span class="code-module--inline--5f9ed">displayName</span> property on the store constructors.
<em>(Note: BetterDiscord&#x27;s <span class="code-module--inline--5f9ed">byDisplayName</span> filter does not search constructors as of now.)</em>
Theoretically you can now find stores using their name rather than interface or other characteristics.
Store names can also prove useful when figuring out a store&#x27;s purpose.</div>
<div class="codetabs-module--container--65389"><div class="codetabs-module--tabs--3225b"><div class="codetabs-module--item--ab659 codetabs-module--active--196a5">Props</div><div class="codetabs-module--item--ab659">Name</div></div><div class="codetabs-module--content--d3d01 code-module--no-margin--74dce"><div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token maybe-class-name">GuildStore</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token maybe-class-name">Filters</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">byProps</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;getGuild&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">2</span><span class="token plain"></span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token maybe-class-name">ChannelStore</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token maybe-class-name">Filters</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">byProps</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;getChannel&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;hasChannel&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">3</span><span class="token plain"></span><span class="token keyword" style="color:#c595c5">const</span><span class="token plain"> </span><span class="token maybe-class-name">UserStore</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token maybe-class-name">Filters</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">byProps</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;getUser&quot;</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;getCurrentUser&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">;</span></div></div></div></div></div>
<div class="paragraph-module--paragraph--e296c">Usually a good way to start is to look at a part of the UI where data from the store you are searching for is supposedly used.
Go up the parent chain and try to find the first &quot;normal&quot; component whose props do not include the data itself or children with the data already &quot;rendered&quot;.
The relevant stores are most likely accessed within this component.</div>
<div class="paragraph-module--paragraph--e296c">Alternatively you can attempt taking educated guesses regarding the store&#x27;s name or methods - either complete or partial, like <span class="code-module--inline--5f9ed">name.toLowerCase().includes(&quot;guild&quot;)</span>.</div>
<div class="paragraph-module--paragraph--e296c">A list of all stores can be retreived by either checking the name or by making sure it is an instance of <span class="code-module--inline--5f9ed">Flux.Store</span>:</div>
<div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">2</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">exports</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#c595c5">typeof</span><span class="token plain"> exports</span><span class="token operator" style="color:#89ddff">?.</span><span class="token plain">getName </span><span class="token operator" style="color:#89ddff">===</span><span class="token plain"> </span><span class="token string" style="color:#c3e88d">&quot;function&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#89ddff">&amp;&amp;</span><span class="token plain"> exports</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">getName</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">.</span><span class="token method function property-access" style="color:#79b6f2">endsWith</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token string" style="color:#c3e88d">&quot;Store&quot;</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">3</span><span class="token plain">    </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#79b6f2">first</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token plain"></span></div><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">4</span><span class="token plain"></span><span class="token punctuation" style="color:#89ddff">)</span></div></div></div>
<div class="code-module--codeblock--bfd94"><div class="prism-code language-js code-module--content--3d4e5" style="background-color:#0f1010;color:#fff"><div class="token-line" style="color:#fff"><span class="code-module--number--8b145">1</span><span class="token function" style="color:#79b6f2">getModule</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token punctuation" style="color:#89ddff">(</span><span class="token parameter" style="color:#ff8b50">exports</span><span class="token punctuation" style="color:#89ddff">)</span><span class="token plain"> </span><span class="token arrow keyword" style="color:#c595c5">=&gt;</span><span class="token plain"> exports </span><span class="token keyword" style="color:#c595c5">instanceof</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">Flux</span><span class="token class-name punctuation" style="color:#89ddff">.</span><span class="token class-name" style="color:#fac863">Store</span><span class="token punctuation" style="color:#89ddff">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#79b6f2">first</span><span class="token operator" style="color:#89ddff">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#89ddff">}</span><span class="token punctuation" style="color:#89ddff">)</span></div></div></div>
<div class="paragraph-module--paragraph--e296c">Note that the first version will be missing a couple of stores which have no name set.</div></div></div><div class="footer-module--footer--d155e"><div class="footer-module--left--d6390">Copyright 2021 Zerthox</div><div class="footer-module--right--83036"><a href="https://github.com/zerthox" class="footer-module--link--06b40" target="_blank" rel="noopener noreferrer">GitHub</a> | <a href="https://github.com/zerthox/zerthox.github.io" class="footer-module--link--06b40" target="_blank" rel="noopener noreferrer">Source</a></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/guides/bd/flux/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-18a616f2aa02815269b8.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-3a4ed80d4c24f94c0e03.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-473150e7ece2e59e3727.js\"],\"component---src-pages-guides-index-tsx\":[\"/component---src-pages-guides-index-tsx-878d8e9e0167381d0e5e.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-74aabbfe8d00fa2e98c9.js\"],\"component---src-templates-markdown-tsx-content-file-path-home-runner-work-zerthox-github-io-zerthox-github-io-src-pages-drafts-bd-reverse-engineering-index-mdx\":[\"/component---src-templates-markdown-tsx-content-file-path-home-runner-work-zerthox-github-io-zerthox-github-io-src-pages-drafts-bd-reverse-engineering-index-mdx-76887fa0e4d74083577e.js\"],\"component---src-templates-markdown-tsx-content-file-path-home-runner-work-zerthox-github-io-zerthox-github-io-src-pages-guides-bd-flux-index-mdx\":[\"/component---src-templates-markdown-tsx-content-file-path-home-runner-work-zerthox-github-io-zerthox-github-io-src-pages-guides-bd-flux-index-mdx-ddc770a1b8ba0990a680.js\"],\"component---src-templates-markdown-tsx-content-file-path-home-runner-work-zerthox-github-io-zerthox-github-io-src-pages-guides-bd-getting-started-index-mdx\":[\"/component---src-templates-markdown-tsx-content-file-path-home-runner-work-zerthox-github-io-zerthox-github-io-src-pages-guides-bd-getting-started-index-mdx-3adc0b21bfe7f7f6e346.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="c8e9d9f657b7e08dc4c6";</script><script src="/webpack-runtime-75ebc9f25a768471c7e8.js" async></script><script src="/framework-051e54137da4eb1ce38d.js" async></script><script src="/app-18a616f2aa02815269b8.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>